<!DOCTYPE HTML>
<html>

<head>

  <meta charset="utf-8">
  
  <title>Try Autonomous Agent | Andrew&#39;s Blog</title>
  <meta name="author" content="Andrew">
  
  <meta name="description" content="Task-driven Autonomous Agent Utilizing GPT-4, Pinecone, and LangChain for Diverse Applications







In&amp;nbsp;[&amp;nbsp;]:

    
%%bash
cd ~ &amp;amp;&amp;amp; g">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Try Autonomous Agent"/>
  <meta property="og:site_name" content="Andrew&#39;s Blog"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/notebook.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/tabs.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  <script src="/js/tabs.js"></script>

  <!-- analytics -->
  



<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
    <!-- End of mathjax configuration -->

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Andrew&#39;s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">		
			<h1> Try Autonomous Agent</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
	

			

	<!-- content -->
	<div class="mypage">
	    <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a target="_blank" rel="noopener" href="https://yoheinakajima.com/task-driven-autonomous-agent-utilizing-gpt-4-pinecone-and-langchain-for-diverse-applications/">Task-driven Autonomous Agent Utilizing GPT-4, Pinecone, and LangChain for Diverse Applications</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
<span class="nb">cd</span><span class="w"> </span>~<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/yoheinakajima/babyagi
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<p>è®© BabyAGI åˆ©ç”¨ GPT-4 æ’ä»¶æ¥æ‰§è¡Œä»»åŠ¡ï¼Ÿ</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<p>è¦å°†Pineconeæ¢æˆWeaviateï¼Œéœ€è¦å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><p>å®‰è£…Weaviateå®¢æˆ·ç«¯åº“ï¼šå¯ä»¥ä½¿ç”¨<code>pip install weaviate-client</code>å‘½ä»¤æ¥å®‰è£…ã€‚</p>
</li>
<li><p>åœ¨Weaviateä¸­åˆ›å»ºç´¢å¼•ï¼šæ‚¨éœ€è¦åœ¨Weaviateä¸­åˆ›å»ºä¸€ä¸ªæ–°ç´¢å¼•æ¥å­˜å‚¨æ•°æ®ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•ï¼š</p>
<pre><code>import weaviate

client = weaviate.Client(&quot;http://localhost:8080&quot;)
index = client.index.create(&quot;YOUR_INDEX_NAME&quot;, [&quot;YOUR_INDEX_CLASS&quot;])
</code></pre>
<p>è¯·å°†â€œYOUR_INDEX_NAMEâ€å’Œâ€œYOUR_INDEX_CLASSâ€æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„ç´¢å¼•åç§°å’Œç´¢å¼•ç±»ã€‚</p>
</li>
<li><p>å°†æ•°æ®æ·»åŠ åˆ°Weaviateç´¢å¼•ä¸­ï¼šæ‚¨éœ€è¦ä½¿ç”¨Weaviateå®¢æˆ·ç«¯åº“å°†æ•°æ®æ·»åŠ åˆ°Weaviateç´¢å¼•ä¸­ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ç‰‡æ®µï¼š</p>
<pre><code>import weaviate

client = weaviate.Client(&quot;http://localhost:8080&quot;)
index = client.index(&quot;YOUR_INDEX_NAME&quot;)
data = [{&quot;name&quot;: &quot;John&quot;, &quot;age&quot;: 30}, {&quot;name&quot;: &quot;Jane&quot;, &quot;age&quot;: 35}]
index.batch.create(data)
</code></pre>
<p>è¯·å°†â€œYOUR_INDEX_NAMEâ€æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„ç´¢å¼•åç§°ï¼Œå°†â€œdataâ€æ›¿æ¢ä¸ºæ‚¨è¦æ·»åŠ åˆ°ç´¢å¼•ä¸­çš„æ•°æ®ã€‚</p>
</li>
<li><p>ä¿®æ”¹ä»£ç ï¼šæœ€åï¼Œæ‚¨éœ€è¦ä¿®æ”¹ä»£ç ï¼Œä»¥ä¾¿å°†Pinecone APIè°ƒç”¨æ›¿æ¢ä¸ºWeaviate APIè°ƒç”¨ã€‚å…·ä½“è€Œè¨€ï¼Œæ‚¨éœ€è¦æ›´æ”¹ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code># Create Pinecone index
table_name = YOUR_TABLE_NAME
dimension = 1536
metric = &quot;cosine&quot;
pod_type = &quot;p1&quot;
if table_name not in pinecone.list_indexes():
    pinecone.create_index(table_name, dimension=dimension, metric=metric, pod_type=pod_type)

# Connect to the index
index = pinecone.Index(table_name)
</code></pre>
<p>ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢ï¼š</p>
<pre><code># Connect to the Weaviate index
import weaviate

client = weaviate.Client(&quot;http://localhost:8080&quot;)
index = client.index(YOUR_INDEX_NAME)
</code></pre>
<p>è¯·å°†â€œYOUR_INDEX_NAMEâ€æ›¿æ¢ä¸ºæ‚¨åœ¨æ­¥éª¤2ä¸­åˆ›å»ºçš„ç´¢å¼•åç§°ã€‚</p>
</li>
</ol>
<p>è¯·æ³¨æ„ï¼ŒWeaviateä¸Pineconeä¸åŒï¼Œå› æ­¤æ‚¨éœ€è¦ç›¸åº”åœ°ä¿®æ”¹ä»£ç ä»¥é€‚åº”Weaviate APIã€‚æ­¤å¤–ï¼Œæ‚¨éœ€è¦ç¡®ä¿åœ¨Weaviateä¸­åˆ›å»ºçš„ç´¢å¼•å…·æœ‰æ­£ç¡®çš„ç»´æ•°å’ŒæŒ‡æ ‡ã€‚</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<p>BabyAGI çš„æŠ€æœ¯ç»†èŠ‚</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">IPython</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">ipymock.mock</span> <span class="kn">import</span> <span class="n">start_conversation</span>

<span class="k">def</span> <span class="nf">ask</span><span class="p">(</span><span class="n">prompt</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="n">start_conversation</span><span class="p">(</span><span class="n">prompt</span><span class="p">):</span>
        <span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">IPython</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
        <span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">pinecone-client æ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_markdown rendered_html output_subarea ">
<p>pinecone-client æ˜¯ Pinecone çš„ Python å®¢æˆ·ç«¯åº“ï¼Œç”¨äºä¸ Pinecone æœåŠ¡è¿›è¡Œäº¤äº’ã€‚ Pinecone æ˜¯ä¸€ç§æ‰˜ç®¡å‹çš„å‘é‡ç´¢å¼•æœåŠ¡ï¼Œç”¨äºé«˜æ•ˆå­˜å‚¨å’Œæ£€ç´¢å‘é‡æ•°æ®ã€‚ä½¿ç”¨ pinecone-clientï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°å°†å‘é‡æ•°æ®ä¸Šä¼ åˆ° Pinecone å¹¶æŸ¥è¯¢è¯¥æ•°æ®ã€‚å®ƒæä¾›äº†ä¸€ç»„ç®€å•çš„ APIï¼Œä½¿æ‚¨èƒ½å¤Ÿåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ç´¢å¼•ä»¥åŠæœç´¢å¹¶æ£€ç´¢ç›¸ä¼¼çš„å‘é‡ã€‚</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Pinecone is a vector search platform that provides efficient search and storage capabilities for high-dimensional vector data. In our system, we use Pinecone to store and retrieve task-related data, such as task descriptions, constraints, and results.</span>

<span class="s1">ç¿»è¯‘æˆä¸­æ–‡ã€‚</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_markdown rendered_html output_subarea ">
<p>Pinecone æ˜¯ä¸€ä¸ªå‘é‡æœç´¢å¹³å°ï¼Œä¸ºé«˜ç»´å‘é‡æ•°æ®æä¾›é«˜æ•ˆçš„æœç´¢å’Œå­˜å‚¨èƒ½åŠ›ã€‚åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Pinecone å­˜å‚¨å’Œæ£€ç´¢ä¸ä»»åŠ¡ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚ä»»åŠ¡æè¿°ã€çº¦æŸå’Œç»“æœã€‚</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Pinecone æ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_markdown rendered_html output_subarea ">
<p>Pinecone çš„æ ¸å¿ƒåŸç†æ˜¯ä½¿ç”¨å‘é‡ç´¢å¼•å’Œé«˜æ•ˆçš„å‘é‡ç›¸ä¼¼åº¦åŒ¹é…æŠ€æœ¯ï¼Œä»¥åŠ å¿«é«˜ç»´å‘é‡æ•°æ®çš„å­˜å‚¨å’Œæ£€ç´¢ã€‚å®ƒé€šè¿‡å°†å‘é‡è¡¨ç¤ºä¸ºé«˜ç»´ç©ºé—´ä¸­çš„ç‚¹ï¼Œå¹¶åœ¨è¿™äº›ç‚¹ä¹‹é—´æ„å»ºç´¢å¼•æ¥å®ç°å¿«é€Ÿçš„ç›¸ä¼¼åº¦æœç´¢ã€‚åœ¨æŸ¥è¯¢æ—¶ï¼ŒPinecone ä¼šæ ¹æ®è¾“å…¥å‘é‡çš„ç›¸ä¼¼åº¦å¾—åˆ†è¿”å›æœ€åŒ¹é…çš„å‘é‡ã€‚å®ƒä½¿ç”¨çš„æŠ€æœ¯åŒ…æ‹¬è¿‘ä¼¼æœ€è¿‘é‚»ï¼ˆANNï¼‰æœç´¢ç®—æ³•å’Œå“ˆå¸Œå‡½æ•°ï¼Œä»¥å®ç°å¿«é€Ÿå’Œé«˜æ•ˆçš„æœç´¢å’Œå­˜å‚¨ã€‚</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Pinecone æœåŠ¡å…è´¹å—ï¼Ÿ</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_markdown rendered_html output_subarea ">
<p>Pinecone offers a free plan with certain limitations, as well as paid plans with more features and higher usage limits. The free plan allows for up to 5 million vector embeddings, 1GB storage, and 10 queries per second, among other limitations. You can check Pinecone's website for more information on their pricing and plans.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">æœ‰ä»€ä¹ˆæ›¿ä»£ Pinecone æœåŠ¡çš„å¼€æºæ–¹æ¡ˆï¼Ÿ</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_markdown rendered_html output_subarea ">
<p>æœ‰ä¸€äº›å¼€æºçš„å‘é‡æ£€ç´¢æ–¹æ¡ˆå¯ä»¥æ›¿ä»£ Pineconeï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<ol>
<li>Annoyï¼šä¸€ä¸ªC++åº“ï¼Œæ”¯æŒPythonã€Javaå’ŒGoç­‰å¤šç§è¯­è¨€ï¼Œç”¨äºå¿«é€Ÿè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ã€‚</li>
<li>Faissï¼šFacebookå¼€å‘çš„ä¸€ä¸ªé«˜æ•ˆçš„ç›¸ä¼¼æ€§æœç´¢å’Œèšç±»åº“ï¼Œæ”¯æŒGPUåŠ é€Ÿã€‚</li>
<li>Milvusï¼šç”±Zillizå¼€å‘çš„å¼€æºå‘é‡ç›¸ä¼¼æ€§æœç´¢å¼•æ“ï¼Œæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²å’ŒGPUåŠ é€Ÿã€‚</li>
<li>NMSLIBï¼šä¸€ä¸ªå¯æ‰©å±•ã€é«˜æ€§èƒ½ã€è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢åº“ï¼Œæ”¯æŒå¤šç§è·ç¦»åº¦é‡å’Œæ•°æ®ç»“æ„ã€‚</li>
</ol>
<p>è¿™äº›æ–¹æ¡ˆéƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©é€‚åˆçš„æ–¹æ¡ˆã€‚</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">æ¯”è¾ƒ Weaviate å’Œ Faiss</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_markdown rendered_html output_subarea ">
<p>Weaviateå’ŒFaisséƒ½æ˜¯ç”¨äºå‘é‡æœç´¢çš„å·¥å…·ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä¸åŒçš„é‡ç‚¹å’Œç”¨ä¾‹ã€‚</p>
<p>Weaviateæ˜¯ä¸€ä¸ªåŸºäºå›¾æ•°æ®åº“çš„å‘é‡æœç´¢å¼•æ“ï¼Œæ—¨åœ¨æä¾›å¯æ‰©å±•çš„å®æ—¶å‘é‡æœç´¢ï¼Œæ”¯æŒé«˜ç»´æ•°æ®å’Œå¤šä¸ªæ•°æ®ç±»å‹ã€‚Weaviateçš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶èƒ½å¤Ÿè‡ªåŠ¨å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»ï¼Œä½¿å…¶æ˜“äºæœç´¢å’Œå‘ç°ã€‚å®ƒè¿˜æ”¯æŒè‡ªå®šä¹‰æ‰©å±•å’Œæ’ä»¶ï¼Œå¯ä¸å…¶ä»–æœåŠ¡å’Œå·¥å…·è¿›è¡Œé›†æˆã€‚</p>
<p>Faissæ˜¯Facebookå¼€å‘çš„ä¸€ä¸ªåŸºäºCPUå’ŒGPUçš„é«˜æ•ˆå‘é‡æœç´¢åº“ï¼Œæ—¨åœ¨æ”¯æŒå¤§è§„æ¨¡å‘é‡æ•°æ®çš„ç›¸ä¼¼åº¦æœç´¢ã€‚ Faissçš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶å¯å¤„ç†éå¸¸å¤§çš„å‘é‡æ•°æ®é›†ï¼Œå…·æœ‰é«˜æ•ˆçš„ç´¢å¼•ç»“æ„å’Œå¹¶è¡ŒæŸ¥è¯¢èƒ½åŠ›ï¼Œå› æ­¤é€šå¸¸ç”¨äºå®æ—¶æ¨èã€å›¾åƒæœç´¢ç­‰åœºæ™¯ã€‚</p>
<p>å› æ­¤ï¼Œé€‰æ‹©Weaviateè¿˜æ˜¯Faisså–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚å¦‚æœéœ€è¦å¿«é€Ÿå¤„ç†å’Œæœç´¢é«˜ç»´æ•°æ®å¹¶è‡ªåŠ¨åˆ†ç±»æ•°æ®ï¼Œåˆ™Weaviateæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼›å¦‚æœéœ€è¦å¤„ç†å¤§è§„æ¨¡å‘é‡æ•°æ®é›†ï¼Œåˆ™Faisså¯èƒ½æ›´é€‚åˆã€‚</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For the application scenario of a task-driven autonomous agent robot, Weaviate may be more suitable. Because Weaviate has the ability to automatically classify data, it can help the robot discover and execute related tasks more quickly. Weaviate also supports search for multiple data types and can handle high-dimensional data, which may be useful for tasks such as natural language processing and semantic understanding. Of course, the specific choice depends on the application scenario and specific requirements.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">ç¿»è¯‘æˆä¸­æ–‡ï¼š</span>

<span class="s1">ğŸ”¥1/8</span>
<span class="s1">Introducing &quot;ğŸ¤– Task-driven Autonomous Agent&quot;</span>

<span class="s1">An agent that leverages @openai &#39;s GPT-4, @pinecone vector search, and @LangChainAI framework to autonomously create and perform tasks based on an objective.</span>

<span class="s1">ğŸš€2/8 The system can complete tasks, generate new tasks based on results, and prioritize tasks in real-time. It demonstrates the potential of AI-powered language models to autonomously perform tasks within various constraints and contexts.</span>

<span class="s1">ğŸ’¡3/8 The autonomous agent uses GPT-4 for task completion, Pinecone for efficient search and storage of task-related data, and the LangChain framework to enhance decision-making processes. #GPT4 #Pinecone #LangChain</span>

<span class="s1">ğŸ¯4/8 The system maintains a task list for managing and prioritizing tasks. It autonomously creates new tasks based on completed results and reprioritizes the task list accordingly, showcasing the adaptability of AI-powered language models.</span>

<span class="s1">ğŸ”§5/8 To complete tasks, the system uses GPT-4 and LangChain&#39;s capabilities, enriching and storing results in Pinecone. This integrated approach allows the AI agent to interact with its environment and perform tasks efficiently.</span>

<span class="s1">ğŸ§ 6/8 The system generates new tasks based on completed task results and prioritizes them using GPT-4. This allows the system to adapt and respond to new information and priorities.</span>

<span class="s1">ğŸ”®7/8 Future improvements include integrating a security/safety agent, task sequencing and parallel tasks, generating interim milestones, and incorporating real-time priority updates.</span>

<span class="s1">ğŸ¤8/8 This new approach paves the way for AI-powered language models to autonomously perform tasks within various constraints and contexts, enabling new applications and opportunities. Big thanks to all involved! #AIResearch #GPT4 #Pinecone #LangChain</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_markdown rendered_html output_subarea ">
<p>ğŸ”¥1/8
ä»‹ç» &quot;ğŸ¤– ä»»åŠ¡é©±åŠ¨çš„è‡ªä¸»ä»£ç†&quot;</p>
<p>è¯¥ä»£ç†åˆ©ç”¨ @openai çš„ GPT-4ã€@pinecone å‘é‡æœç´¢å’Œ @LangChainAI æ¡†æ¶ï¼ŒåŸºäºç›®æ ‡è‡ªä¸»åˆ›å»ºå’Œæ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>ğŸš€2/8 ç³»ç»Ÿèƒ½å¤Ÿå®Œæˆä»»åŠ¡ï¼ŒåŸºäºç»“æœç”Ÿæˆæ–°ä»»åŠ¡ï¼Œå¹¶å®æ—¶ä¼˜å…ˆå¤„ç†ä»»åŠ¡ã€‚è¿™å±•ç¤ºäº†AIé©±åŠ¨çš„è¯­è¨€æ¨¡å‹åœ¨ä¸åŒçº¦æŸå’Œç¯å¢ƒä¸‹è‡ªä¸»æ‰§è¡Œä»»åŠ¡çš„æ½œåŠ›ã€‚</p>
<p>ğŸ’¡3/8 è‡ªä¸»ä»£ç†ä½¿ç”¨ GPT-4 å®Œæˆä»»åŠ¡ï¼Œä½¿ç”¨ Pinecone é«˜æ•ˆæœç´¢å’Œå­˜å‚¨ä»»åŠ¡ç›¸å…³æ•°æ®ï¼Œä½¿ç”¨ LangChain æ¡†æ¶å¢å¼ºå†³ç­–è¿‡ç¨‹ã€‚#GPT4 #Pinecone #LangChain</p>
<p>ğŸ¯4/8 ç³»ç»Ÿç»´æŠ¤ä»»åŠ¡åˆ—è¡¨ï¼Œç”¨äºç®¡ç†å’Œä¼˜å…ˆå¤„ç†ä»»åŠ¡ã€‚å®ƒåŸºäºå·²å®Œæˆçš„ç»“æœè‡ªä¸»åˆ›å»ºæ–°ä»»åŠ¡ï¼Œå¹¶ç›¸åº”åœ°é‡æ–°è®¾ç½®ä»»åŠ¡åˆ—è¡¨çš„ä¼˜å…ˆçº§ï¼Œå±•ç¤ºäº†AIé©±åŠ¨çš„è¯­è¨€æ¨¡å‹çš„é€‚åº”æ€§ã€‚</p>
<p>ğŸ”§5/8 ä¸ºäº†å®Œæˆä»»åŠ¡ï¼Œç³»ç»Ÿä½¿ç”¨ GPT-4 å’Œ LangChain çš„èƒ½åŠ›ï¼Œåœ¨ Pinecone ä¸­ä¸°å¯Œå’Œå­˜å‚¨ç»“æœã€‚è¿™ç§ç»¼åˆæ–¹æ³•å…è®¸AIä»£ç†ä¸ç¯å¢ƒäº¤äº’ï¼Œé«˜æ•ˆåœ°æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>ğŸ§ 6/8 ç³»ç»ŸåŸºäºå·²å®Œæˆçš„ä»»åŠ¡ç»“æœç”Ÿæˆæ–°ä»»åŠ¡ï¼Œå¹¶ä½¿ç”¨ GPT-4 è¿›è¡Œä¼˜å…ˆæ’åºã€‚è¿™ä½¿ç³»ç»Ÿèƒ½å¤Ÿé€‚åº”å’Œå“åº”æ–°ä¿¡æ¯å’Œä¼˜å…ˆäº‹é¡¹ã€‚</p>
<p>ğŸ”®7/8 æœªæ¥çš„æ”¹è¿›åŒ…æ‹¬æ•´åˆå®‰å…¨/å®‰å…¨ä»£ç†ã€ä»»åŠ¡æ’åºå’Œå¹¶è¡Œä»»åŠ¡ã€ç”Ÿæˆä¸­é—´é‡Œç¨‹ç¢‘ä»¥åŠæ•´åˆå®æ—¶ä¼˜å…ˆæ›´æ–°ã€‚</p>
<p>ğŸ¤8/8 è¿™ç§æ–°æ–¹æ³•ä¸ºAIé©±åŠ¨çš„è¯­è¨€æ¨¡å‹åœ¨ä¸åŒçº¦æŸå’Œç¯å¢ƒä¸‹è‡ªä¸»æ‰§è¡Œä»»åŠ¡é“ºå¹³äº†é“è·¯ï¼Œåˆ›é€ äº†æ–°çš„åº”ç”¨å’Œæœºä¼šã€‚ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰å‚ä¸çš„äººï¼#AIResearch #GPT4 #Pinecone #LangChain</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">æˆ‘ç´¯äº†ã€‚å¸¦ç€æˆ‘ç¥·å‘Šä¸€ä¸‹å§ã€‚</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_markdown rendered_html output_subarea ">
<p>å½“ä½ æ„Ÿåˆ°ç–²æƒ«å’Œå›°æƒ‘æ—¶ï¼Œç¥·å‘Šå¯ä»¥ä¸ºä½ å¸¦æ¥å¹³é™å’Œå®‰æ…°ã€‚æ„¿ç¥èµç¦ç»™ä½ ï¼Œä¿æŠ¤ä½ ï¼Œå¹¶ä¸ºä½ æä¾›åŠ›é‡å’Œæ™ºæ…§ã€‚æ„¿ä»–çš„æ©å…¸å’Œæ…ˆçˆ±æ°¸è¿œä¸ä½ åŒåœ¨ã€‚æ„¿ä½ åœ¨è¿™æ®µæ—¶é—´ä¸­å¾—åˆ°ä¼‘æ¯å’Œæ¢å¤ï¼Œå¹¶åœ¨æœªæ¥è¿æ¥æ›´å¥½çš„æ—¥å­ã€‚é˜¿é—¨ã€‚</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<p>ä¸­æ–‡ç‰ˆæœ¬</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/use_cases/agents/baby_agi.html">BabyAGI with LangChain and Faiss</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">openai</span>
<span class="kn">import</span> <span class="nn">pinecone</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Set Variables</span>
<span class="n">load_dotenv</span><span class="p">()</span>

<span class="c1"># Set API Keys</span>
<span class="n">OPENAI_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;OPENAI_API_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">OPENAI_API_KEY</span><span class="p">,</span> <span class="s1">&#39;OPENAI_API_KEY environment variable is missing from .env&#39;</span>

<span class="n">OPENAI_API_MODEL</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;OPENAI_API_MODEL&#39;</span><span class="p">,</span> <span class="s1">&#39;gpt-3.5-turbo&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">OPENAI_API_MODEL</span><span class="p">,</span> <span class="s1">&#39;OPENAI_API_MODEL environment variable is missing from .env&#39;</span>

<span class="k">if</span> <span class="s1">&#39;gpt-4&#39;</span> <span class="ow">in</span> <span class="n">OPENAI_API_MODEL</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[91m</span><span class="se">\033</span><span class="s1">[1m&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*****USING GPT-4. POTENTIALLY EXPENSIVE. MONITOR YOUR COSTS*****&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m</span><span class="se">\033</span><span class="s1">[0m&#39;</span><span class="p">)</span>

<span class="n">PINECONE_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;PINECONE_API_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">PINECONE_API_KEY</span><span class="p">,</span> <span class="s1">&#39;PINECONE_API_KEY environment variable is missing from .env&#39;</span>

<span class="n">PINECONE_ENVIRONMENT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;PINECONE_ENVIRONMENT&#39;</span><span class="p">,</span> <span class="s1">&#39;us-east1-gcp&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">PINECONE_ENVIRONMENT</span><span class="p">,</span> <span class="s1">&#39;PINECONE_ENVIRONMENT environment variable is missing from .env&#39;</span>

<span class="c1"># Table config</span>
<span class="n">YOUR_TABLE_NAME</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TABLE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">YOUR_TABLE_NAME</span><span class="p">,</span> <span class="s1">&#39;TABLE_NAME environment variable is missing from .env&#39;</span>

<span class="c1"># Project config</span>
<span class="n">OBJECTIVE</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;OBJECTIVE&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">OBJECTIVE</span><span class="p">,</span> <span class="s1">&#39;OBJECTIVE environment variable is missing from .env&#39;</span>

<span class="n">YOUR_FIRST_TASK</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;FIRST_TASK&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">YOUR_FIRST_TASK</span><span class="p">,</span> <span class="s1">&#39;FIRST_TASK environment variable is missing from .env&#39;</span>

<span class="c1">#Print OBJECTIVE</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[96m</span><span class="se">\033</span><span class="s1">[1m&#39;</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*****OBJECTIVE*****</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m</span><span class="se">\033</span><span class="s1">[0m&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">OBJECTIVE</span><span class="p">)</span>

<span class="c1"># Configure OpenAI and Pinecone</span>
<span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">OPENAI_API_KEY</span>
<span class="n">pinecone</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">PINECONE_API_KEY</span><span class="p">,</span> <span class="n">environment</span><span class="o">=</span><span class="n">PINECONE_ENVIRONMENT</span><span class="p">)</span>

<span class="c1"># Create Pinecone index</span>
<span class="n">table_name</span> <span class="o">=</span> <span class="n">YOUR_TABLE_NAME</span>
<span class="n">dimension</span> <span class="o">=</span> <span class="mi">1536</span>
<span class="n">metric</span> <span class="o">=</span> <span class="s1">&#39;cosine&#39;</span>
<span class="n">pod_type</span> <span class="o">=</span> <span class="s1">&#39;p1&#39;</span>
<span class="k">if</span> <span class="n">table_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pinecone</span><span class="o">.</span><span class="n">list_indexes</span><span class="p">():</span>
    <span class="n">pinecone</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">dimension</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">,</span> <span class="n">pod_type</span><span class="o">=</span><span class="n">pod_type</span><span class="p">)</span>

<span class="c1"># Connect to the index</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">pinecone</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">table_name</span><span class="p">)</span>

<span class="c1"># Task list</span>
<span class="n">task_list</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([])</span>

<span class="k">def</span> <span class="nf">add_task</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
    <span class="n">task_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_ada_embedding</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">openai</span><span class="o">.</span><span class="n">Embedding</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="p">[</span><span class="n">text</span><span class="p">],</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;text-embedding-ada-002&#39;</span><span class="p">)[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;embedding&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">openai_call</span><span class="p">(</span><span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">OPENAI_API_MODEL</span><span class="p">,</span> <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">max_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">model</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;gpt-&#39;</span><span class="p">):</span>
        <span class="c1"># Use completion API</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">engine</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
            <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">max_tokens</span><span class="o">=</span><span class="n">max_tokens</span><span class="p">,</span>
            <span class="n">top_p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">frequency_penalty</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">presence_penalty</span><span class="o">=</span><span class="mi">0</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Use chat completion API</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">}]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">ChatCompletion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">max_tokens</span><span class="o">=</span><span class="n">max_tokens</span><span class="p">,</span>
            <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">stop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">task_creation_agent</span><span class="p">(</span><span class="n">objective</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">task_description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">task_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡åˆ›å»ºçš„ AIï¼Œä½¿ç”¨æ‰§è¡Œä»£ç†çš„ç»“æœæ¥åˆ›å»ºæ–°çš„ä»»åŠ¡ï¼Œç›®æ ‡æ˜¯ï¼š</span><span class="si">{</span><span class="n">objective</span><span class="si">}</span><span class="s2">ï¼Œä¸Šä¸€ä¸ªå·²å®Œæˆçš„ä»»åŠ¡çš„ç»“æœæ˜¯ï¼š</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">ã€‚è¿™ä¸ªç»“æœæ˜¯åŸºäºä»¥ä¸‹ä»»åŠ¡æè¿°çš„ï¼š</span><span class="si">{</span><span class="n">task_description</span><span class="si">}</span><span class="s2">ã€‚ä»¥ä¸‹æ˜¯ä¸å®Œæ•´çš„ä»»åŠ¡æ¸…å•ï¼š</span><span class="si">{</span><span class="s1">&#39;ã€&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">task_list</span><span class="p">)</span><span class="si">}</span><span class="s2">ã€‚æ ¹æ®ç»“æœï¼Œåˆ›å»ºæ–°çš„ä»»åŠ¡ä¾› AI ç³»ç»Ÿå®Œæˆï¼Œä¸è¦ä¸ä¸å®Œæ•´çš„ä»»åŠ¡é‡å ã€‚å°†ä»»åŠ¡ä½œä¸ºæ•°ç»„è¿”å›ã€‚&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">openai_call</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="n">new_tasks</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;task_name&#39;</span><span class="p">:</span> <span class="n">task_name</span><span class="p">}</span> <span class="k">for</span> <span class="n">task_name</span> <span class="ow">in</span> <span class="n">new_tasks</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">prioritization_agent</span><span class="p">(</span><span class="n">this_task_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">task_list</span>
    <span class="n">task_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;task_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">task_list</span><span class="p">]</span>
    <span class="n">next_task_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">this_task_id</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡ä¼˜å…ˆçº§æ’åˆ— AIï¼Œä»»åŠ¡æ¸…å•å¦‚ä¸‹ï¼š</span><span class="si">{</span><span class="n">task_names</span><span class="si">}</span><span class="s1">ã€‚è¯·è€ƒè™‘ä½ çš„å›¢é˜Ÿçš„æœ€ç»ˆç›®æ ‡ï¼š</span><span class="si">{</span><span class="n">OBJECTIVE</span><span class="si">}</span><span class="s1">ã€‚ä¸è¦åˆ é™¤ä»»ä½•ä»»åŠ¡ã€‚è¿”å›ä¸€ä¸ªç¼–å·åˆ—è¡¨ï¼Œä¾‹å¦‚ï¼š</span>
<span class="s1">    #. ç¬¬ä¸€ä¸ªä»»åŠ¡</span>
<span class="s1">    #. ç¬¬äºŒä¸ªä»»åŠ¡</span>
<span class="s1">è¯·ä»æ•°å­— </span><span class="si">{</span><span class="n">next_task_id</span><span class="si">}</span><span class="s1"> å¼€å§‹åˆ—å‡ºä»»åŠ¡æ¸…å•ã€‚&#39;&#39;&#39;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">openai_call</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="n">new_tasks</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">task_list</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">task_string</span> <span class="ow">in</span> <span class="n">new_tasks</span><span class="p">:</span>
        <span class="n">task_parts</span> <span class="o">=</span> <span class="n">task_string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">task_parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">task_id</span> <span class="o">=</span> <span class="n">task_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">task_name</span> <span class="o">=</span> <span class="n">task_parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">task_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;task_id&#39;</span><span class="p">:</span> <span class="n">task_id</span><span class="p">,</span> <span class="s1">&#39;task_name&#39;</span><span class="p">:</span> <span class="n">task_name</span><span class="p">})</span>

<span class="k">def</span> <span class="nf">execution_agent</span><span class="p">(</span><span class="n">objective</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">context</span><span class="o">=</span><span class="n">context_agent</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1">#print(&#39;\n*******RELEVANT CONTEXT******\n&#39;)</span>
    <span class="c1">#print(context)</span>
    <span class="n">prompt</span> <span class="o">=</span><span class="sa">f</span><span class="s1">&#39;æ‚¨æ˜¯ä¸€ä¸ªAIï¼Œæ ¹æ®ä»¥ä¸‹ç›®æ ‡æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼š</span><span class="si">{</span><span class="n">objective</span><span class="si">}</span><span class="s1">ã€‚</span><span class="se">\n</span><span class="s1">è€ƒè™‘å·²ç»å®Œæˆçš„ä»»åŠ¡ï¼š</span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="s1">ã€‚</span><span class="se">\n</span><span class="s1">æ‚¨çš„ä»»åŠ¡æ˜¯ï¼š</span><span class="si">{</span><span class="n">task</span><span class="si">}</span><span class="s1">ã€‚</span><span class="se">\n</span><span class="s1">å›åº”ï¼š&#39;</span>
    <span class="k">return</span> <span class="n">openai_call</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">max_tokens</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">context_agent</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="n">query_embedding</span> <span class="o">=</span> <span class="n">get_ada_embedding</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query_embedding</span><span class="p">,</span> <span class="n">top_k</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">include_metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#print(&#39;***** RESULTS *****&#39;)</span>
    <span class="c1">#print(results)</span>
    <span class="n">sorted_results</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">matches</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>    
    <span class="k">return</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">]))</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sorted_results</span><span class="p">]</span>

<span class="c1"># Add the first task</span>
<span class="n">first_task</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;task_id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;task_name&#39;</span><span class="p">:</span> <span class="n">YOUR_FIRST_TASK</span>
<span class="p">}</span>

<span class="n">add_task</span><span class="p">(</span><span class="n">first_task</span><span class="p">)</span>
<span class="c1"># Main loop</span>
<span class="n">task_id_counter</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">task_list</span><span class="p">:</span>
        <span class="c1"># Print the task list</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[95m</span><span class="se">\033</span><span class="s1">[1m&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*****TASK LIST*****</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m</span><span class="se">\033</span><span class="s1">[0m&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">task_list</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;task_id&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="n">t</span><span class="p">[</span><span class="s1">&#39;task_name&#39;</span><span class="p">])</span>

        <span class="c1"># Step 1: Pull the first task</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">task_list</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[92m</span><span class="se">\033</span><span class="s1">[1m&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*****NEXT TASK*****</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m</span><span class="se">\033</span><span class="s1">[0m&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;task_id&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;task_name&#39;</span><span class="p">])</span>

        <span class="c1"># Send to execution function to complete the task based on the context</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">execution_agent</span><span class="p">(</span><span class="n">OBJECTIVE</span><span class="p">,</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;task_name&#39;</span><span class="p">])</span>
        <span class="n">this_task_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;task_id&#39;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[93m</span><span class="se">\033</span><span class="s1">[1m&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*****TASK RESULT*****</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m</span><span class="se">\033</span><span class="s1">[0m&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="c1"># Step 2: Enrich result and store in Pinecone</span>
        <span class="n">enriched_result</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">}</span>  <span class="c1"># This is where you should enrich the result if needed</span>
        <span class="n">result_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;result_</span><span class="si">{</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;task_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">vector</span> <span class="o">=</span> <span class="n">enriched_result</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>  <span class="c1"># extract the actual result from the dictionary</span>
        <span class="n">index</span><span class="o">.</span><span class="n">upsert</span><span class="p">([(</span><span class="n">result_id</span><span class="p">,</span> <span class="n">get_ada_embedding</span><span class="p">(</span><span class="n">vector</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;task_name&#39;</span><span class="p">],</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">})])</span>

    <span class="c1"># Step 3: Create new tasks and reprioritize task list</span>
    <span class="n">new_tasks</span> <span class="o">=</span> <span class="n">task_creation_agent</span><span class="p">(</span><span class="n">OBJECTIVE</span><span class="p">,</span><span class="n">enriched_result</span><span class="p">,</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;task_name&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;task_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">task_list</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">new_task</span> <span class="ow">in</span> <span class="n">new_tasks</span><span class="p">:</span>
        <span class="n">task_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">new_task</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;task_id&#39;</span><span class="p">:</span> <span class="n">task_id_counter</span><span class="p">})</span>
        <span class="n">add_task</span><span class="p">(</span><span class="n">new_task</span><span class="p">)</span>
    <span class="n">prioritization_agent</span><span class="p">(</span><span class="n">this_task_id</span><span class="p">)</span>

    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Sleep before checking the task list again</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
<span class="nb">cd</span><span class="w"> </span>~<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Torantulino/Auto-GPT
</pre></div>

    </div>
</div>
</div>

</div>
 




	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2023/04/07/A-Study-on-Network-Isolation-Measures-for-Dealing-with-Intelligent-Viruses/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>ä¸Šä¸€é¡µ</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2023/04/04/LangChain-Document-Loader/" class="alignright next">ä¸‹ä¸€é¡µ<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">ç•™è¨€</h2>

  <script data-isso="https://jhub.name/isso/" src="https://jhub.name/isso/js/embed.min.js"></script>
  <section id="isso-thread"></section>
  
</section>

	
	</div> <!-- col-md-9/col-md-12 -->
	
	
		<div class="col-md-3"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2023-04-06 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/Metaverse/">Metaverse<span>10</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	

</div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2023 Andrew
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>â–²</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>

</html>
