<!DOCTYPE HTML>
<html>

<head>

  <meta charset="utf-8">
  
  <title>LangChain Document Loader | Andrew&#39;s Blog</title>
  <meta name="author" content="Andrew">
  
  <meta name="description" content="In&amp;nbsp;[&amp;nbsp;]:

    
%%bash
pip install faiss-cpu


    









    



Collecting faiss-cpu
  Downloading faiss_cpu-1.7.3-cp310-cp310-macosx_10_">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="LangChain Document Loader"/>
  <meta property="og:site_name" content="Andrew&#39;s Blog"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/notebook.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/tabs.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  <script src="/js/tabs.js"></script>

  <!-- analytics -->
  



<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
    <!-- End of mathjax configuration -->

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Andrew&#39;s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">		
			<h1> LangChain Document Loader</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
	

			

	<!-- content -->
	<div class="mypage">
	    <div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
pip<span class="w"> </span>install<span class="w"> </span>faiss-cpu
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Collecting faiss-cpu
  Downloading faiss_cpu-1.7.3-cp310-cp310-macosx_10_9_x86_64.whl (5.6 MB)
     <span class="ansi-black-intense-fg">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-green-fg">5.6/5.6 MB</span> <span class="ansi-red-fg">6.7 MB/s</span> eta <span class="ansi-cyan-fg">0:00:00</span>00:0100:01
Installing collected packages: faiss-cpu
Successfully installed faiss-cpu-1.7.3
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Faiss 是一个用于高维向量相似性搜索和聚类的库，它支持 GPU 运算加速。要让 Faiss 使用 GPU，需要执行以下步骤：</p>
<ol>
<li><p>确认您的计算机上已经安装了 CUDA 和 cuDNN。Faiss 支持的 CUDA 版本可以在 Faiss 文档中查看。</p>
</li>
<li><p>安装 Faiss GPU 版本。您可以使用 pip 安装 Faiss GPU 版本，方法是执行以下命令：</p>
<pre><code>pip install faiss-gpu
</code></pre>
</li>
<li><p>在代码中指定 Faiss 使用 GPU 进行计算。在创建 Faiss Index 对象时，可以指定使用哪个设备。例如，如果要使用默认的 GPU 设备，可以执行以下代码：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">faiss</span>

<span class="c1"># 创建一个 128 维的向量空间</span>
<span class="n">d</span> <span class="o">=</span> <span class="mi">128</span>

<span class="c1"># 创建一个 IndexFlatL2 对象，使用默认的 GPU 设备</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">IndexFlatL2</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
<p>如果您有多个 GPU 设备，也可以在创建 Index 对象时指定使用哪个 GPU。例如，如果要使用第二个 GPU 设备，可以执行以下代码：</p>
<div class="highlight"><pre><span></span><span class="n">index</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">IndexFlatL2</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">co</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">GpuMultipleClonerOptions</span><span class="p">()</span>
<span class="n">co</span><span class="o">.</span><span class="n">select_device</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">index_cpu_to_gpu</span><span class="p">(</span><span class="n">faiss</span><span class="o">.</span><span class="n">StandardGpuResources</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">co</span><span class="p">)</span>
</pre></div>
<p>在这个例子中，我们使用了 <code>faiss.GpuMultipleClonerOptions()</code> 创建了一个选项对象，然后调用了 <code>co.select_device(1)</code> 方法，将第二个 GPU 设备选为使用的设备。最后，我们使用 <code>faiss.index_cpu_to_gpu()</code> 方法将 Index 对象复制到 GPU 上。</p>
</li>
</ol>
<p>注意，使用 Faiss GPU 版本时，所有输入向量都必须是 float32 类型。如果您的向量是其他类型，需要先进行类型转换。此外，您需要将所有向量一起加载到 GPU 内存中，以便 Faiss 可以使用 GPU 进行计算。您可以使用 <code>faiss.StandardGpuResources()</code> 创建一个 GPU 资源对象，然后使用 <code>index.add()</code> 方法将向量添加到 Index 对象中。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>faiss-gpu
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>在 Mac 上安装 CUDA 驱动程序需要进行以下步骤：</p>
<ol>
<li><p>首先，你需要安装 Xcode 和 CUDA Toolkit。如果你已经安装了 Xcode，你可以在终端中输入以下命令来安装 CUDA Toolkit：</p>
<pre><code>brew install --cask cuda
</code></pre>
</li>
<li><p>安装完成后，你需要将 CUDA 环境变量添加到你的 <code>~/.bash_profile</code> 文件中。你可以使用以下命令来打开该文件：</p>
<pre><code>open ~/.bash_profile
</code></pre>
<p>然后在文件末尾添加以下行：</p>
<pre><code>export PATH=&quot;/usr/local/cuda/bin:$PATH&quot;
export DYLD_LIBRARY_PATH=&quot;/usr/local/cuda/lib:$DYLD_LIBRARY_PATH&quot;
</code></pre>
</li>
<li><p>接下来，你需要安装 cuDNN（CUDA Deep Neural Network library）。你可以在 NVIDIA 的网站上下载 cuDNN 库，下载完成后，你需要将库文件解压到 <code>/usr/local/cuda/lib</code> 目录下。你可以使用以下命令来解压文件：</p>
<pre><code>tar -xvf cudnn-11.4-macos-arm64-v8.2.4.15.tgz
sudo cp cuda/include/cudnn*.h /usr/local/cuda/include
sudo cp cuda/lib/libcudnn* /usr/local/cuda/lib
sudo chmod a+r /usr/local/cuda/include/cudnn*.h /usr/local/cuda/lib/libcudnn*
</code></pre>
</li>
<li><p>最后，你需要重新启动终端，以使环境变量生效。你可以使用以下命令来检查 CUDA 是否已正确安装：</p>
<pre><code>nvcc -V
</code></pre>
<p>如果 CUDA 已正确安装，则会输出 CUDA 版本号和其他信息。</p>
</li>
</ol>
<p>请注意，AMD Radeon Pro 5500M 是一款 AMD 显卡，而 CUDA 是 NVIDIA 的技术。因此，如果你需要使用 CUDA，你需要在你的 Mac 上安装 NVIDIA 显卡。如果你想使用 AMD 显卡来进行深度学习等计算密集型任务，你可以考虑使用其他的技术，如 ROCm。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
<span class="nv">HOMEBREW_NO_AUTO_UPDATE</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>brew<span class="w"> </span>install<span class="w"> </span>--cask<span class="w"> </span>cuda
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ROCm（Radeon Open Compute）是一款由 AMD 开发的开源软件平台，旨在为 AMD 显卡提供高性能计算和深度学习功能。ROCm 包括对编程语言和编程模型的支持，包括 OpenMP、OpenCL、HIP（Heterogeneous-compute Interface for Portability）、TensorFlow 和 PyTorch 等，可以为各种计算密集型应用提供支持。</p>
<p>ROCm 支持 Linux 平台和部分 Windows 平台，以及 AMD 的 Radeon 显卡和服务器级显卡，如 Radeon Instinct。ROCm 还支持一些第三方硬件，如 IBM 的 PowerPC 平台和 Cavium 的 ThunderX2。</p>
<p>ROCm 不仅提供了 GPU 加速的计算能力，还支持 CPU 和 GPU 的协同计算，可以提高整个系统的计算性能。此外，ROCm 也为深度学习提供了一些特定的工具和库，如 MIOpen 和 RCCL。</p>
<p>总之，ROCm 是一款功能强大的开源软件平台，为 AMD 显卡用户提供了许多高性能计算和深度学习的功能和工具。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Faiss是一款基于GPU的高性能相似度搜索库，可以用于许多机器学习和深度学习任务。Faiss可以使用ROCm进行加速，从而提高搜索效率和准确性。</p>
<p>以下是在Mac上使用ROCm和Faiss的一些基本步骤：</p>
<ol>
<li><p>首先，你需要安装ROCm。你可以从<a target="_blank" rel="noopener" href="https://rocmdocs.amd.com/en/revamp/Installation_Guide/Installation-Guide.html">官方网站</a>下载并安装ROCm。</p>
</li>
<li><p>安装完成后，你需要设置一些环境变量。你可以在你的<code>~/.bash_profile</code>文件中添加以下行：</p>
</li>
</ol>
<pre><code>export PATH=$PATH:/opt/rocm/bin
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/rocm/lib:/opt/rocm/hip/lib
export HIP_PLATFORM=hcc
export HCC_HOME=/opt/rocm/hcc
</code></pre>
<ol start="3">
<li>然后，你需要安装Faiss。你可以使用以下命令在终端中安装Faiss：</li>
</ol>
<pre><code>pip install faiss-gpu
</code></pre>
<ol start="4">
<li>安装完成后，你可以使用以下示例代码来测试Faiss是否正常工作：</li>
</ol>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">faiss</span>

<span class="c1"># 生成一些随机数据</span>
<span class="n">d</span> <span class="o">=</span> <span class="mi">64</span>  <span class="c1"># 向量维度</span>
<span class="n">nb</span> <span class="o">=</span> <span class="mi">100000</span>  <span class="c1"># 向量数量</span>
<span class="n">xb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="n">nb</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>

<span class="c1"># 构建索引</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">IndexFlatL2</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">is_trained</span><span class="p">)</span>
<span class="n">index</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">xb</span><span class="p">)</span>

<span class="c1"># 搜索</span>
<span class="n">k</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">xq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
<span class="n">D</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">xq</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</pre></div>
<p>如果Faiss正常工作，则应该能够正确地输出搜索结果。</p>
<p>注意，使用ROCm加速Faiss需要满足一些硬件要求，如AMD显卡和支持ROCm的CPU。如果你的硬件不符合要求，你可能无法使用ROCm加速Faiss，或者搜索效率和准确性可能会受到影响。</p>

</div>
</div>
</div>
 




<hr>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="LangChain-GitHub"><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain">LangChain GitHub</a><a class="anchor-link" href="#LangChain-GitHub">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
pip<span class="w"> </span>install<span class="w"> </span>langchain
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/getting_started.html">Agents</a><ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/toolkits/examples/openapi.html">Hierarchical Planning Agent</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/toolkits/examples/python.html">Python Agent</a></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/2302.12813">Check Your Facts and Try Again: Improving Large Language Models with External Knowledge and Automated Feedback</a></li>
<li><a target="_blank" rel="noopener" href="https://yoheinakajima.com/task-driven-autonomous-agent-utilizing-gpt-4-pinecone-and-langchain-for-diverse-applications/">Task-driven Autonomous Agent Utilizing GPT-4, Pinecone, and LangChain for Diverse Applications</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/corca-ai/EVAL">Elastic Versatile Agent with LangChain</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pHaeusler/micro-agent">https://github.com/pHaeusler/micro-agent</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/SamPink/dev-gpt">https://github.com/SamPink/dev-gpt</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/yoheinakajima/babyagi">https://github.com/yoheinakajima/babyagi</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/use_cases/chatbots.html">Chatbots</a><ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/memory/how_to_guides.html">Memory</a><ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/memory/types/buffer.html">ConversationBufferMemory</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/memory/types/buffer_window.html">ConversationBufferWindowMemory</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/agents/examples/conversational_agent.html">Conversation Agent</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/andylokandy/gpt-4-search">GPT with Google Search</a></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.langchain.dev/langchain-chat/">Chatbot for LangChain</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/chat-langchain">Code of Chatbot for LangChain</a><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/chat-langchain/blob/master/query_data.py">Key Code of Chatbot for LangChain</a></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<p><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/readthedocs_documentation.html">ReadTheDocs Documentation Loader</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
wget<span class="w"> </span>-r<span class="w"> </span>-A<span class="w"> </span>.html<span class="w"> </span>-P<span class="w"> </span>rtdocs<span class="w"> </span>https://langchain.readthedocs.io/en/latest/
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">langchain.document_loaders</span> <span class="kn">import</span> <span class="n">ReadTheDocsLoader</span>
<span class="n">ReadTheDocsLoader</span><span class="p">(</span><span class="s1">&#39;rtdocs&#39;</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="s1">&#39;lxml&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[Document(page_content=&#39;.rst\n.pdf\nWelcome to LangChain\n Contents \nGetting Started\nModules\nUse Cases\nReference Docs\nLangChain Ecosystem\nAdditional Resources\nWelcome to LangChain#\nLangChain is a framework for developing applications powered by language models. We believe that the most powerful and differentiated applications will not only call out to a language model via an API, but will also:\nBe data-aware: connect a language model to other sources of data\nBe agentic: allow a language model to interact with its environment\nThe LangChain framework is designed with the above principles in mind.\nThis is the Python specific portion of the documentation. For a purely conceptual guide to LangChain, see here. For the JavaScript documentation, see here.\nGetting Started#\nCheckout the below guide for a walkthrough of how to get started using LangChain to create an Language Model application.\nGetting Started Documentation\nModules#\nThere are several main modules that LangChain provides support for.\nFor each module we provide some examples to get started, how-to guides, reference docs, and conceptual guides.\nThese modules are, in increasing order of complexity:\nModels: The various model types and model integrations LangChain supports.\nPrompts: This includes prompt management, prompt optimization, and prompt serialization.\nMemory: Memory is the concept of persisting state between calls of a chain/agent. LangChain provides a standard interface for memory, a collection of memory implementations, and examples of chains/agents that use memory.\nIndexes: Language models are often more powerful when combined with your own text data - this module covers best practices for doing exactly that.\nChains: Chains go beyond just a single LLM call, and are sequences of calls (whether to an LLM or a different utility). LangChain provides a standard interface for chains, lots of integrations with other tools, and end-to-end chains for common applications.\nAgents: Agents involve an LLM making decisions about which Actions to take, taking that Action, seeing an Observation, and repeating that until done. LangChain provides a standard interface for agents, a selection of agents to choose from, and examples of end to end agents.\nUse Cases#\nThe above modules can be used in a variety of ways. LangChain also provides guidance and assistance in this. Below are some of the common use cases LangChain supports.\nPersonal Assistants: The main LangChain use case. Personal assistants need to take actions, remember interactions, and have knowledge about your data.\nQuestion Answering: The second big LangChain use case. Answering questions over specific documents, only utilizing the information in those documents to construct an answer.\nChatbots: Since language models are good at producing text, that makes them ideal for creating chatbots.\nQuerying Tabular Data: If you want to understand how to use LLMs to query data that is stored in a tabular format (csvs, SQL, dataframes, etc) you should read this page.\nCode Understanding: If you want to understand how to use LLMs to query source code from github, you should read this page.\nInteracting with APIs: Enabling LLMs to interact with APIs is extremely powerful in order to give them more up-to-date information and allow them to take actions.\nExtraction: Extract structured information from text.\nSummarization: Summarizing longer documents into shorter, more condensed chunks of information. A type of Data Augmented Generation.\nEvaluation: Generative models are notoriously hard to evaluate with traditional metrics. One new way of evaluating them is using language models themselves to do the evaluation. LangChain provides some prompts/chains for assisting in this.\nReference Docs#\nAll of LangChain’s reference documentation, in one place. Full documentation on all methods, classes, installation methods, and integration setups for LangChain.\nReference Documentation\nLangChain Ecosystem#\nGuides for how other companies/products can be used with LangChain\nLangChain Ecosystem\nAdditional Resources#\nAdditional collection of resources we think may be useful as you develop your application!\nLangChainHub: The LangChainHub is a place to share and explore other prompts, chains, and agents.\nGlossary: A glossary of all related terms, papers, methods, etc. Whether implemented in LangChain or not!\nGallery: A collection of our favorite projects that use LangChain. Useful for finding inspiration or seeing how things were done in other applications.\nDeployments: A collection of instructions, code snippets, and template repositories for deploying LangChain apps.\nTracing: A guide on using tracing in LangChain to visualize the execution of chains and agents.\nModel Laboratory: Experimenting with different prompts, models, and chains is a big part of developing the best possible application. The ModelLaboratory makes it easy to do so.\nDiscord: Join us on our Discord to discuss all things LangChain!\nProduction Support: As you move your LangChains into production, we’d love to offer more comprehensive support. Please fill out this form and we’ll set up a dedicated support Slack channel.\nnext\nQuickstart Guide\n Contents\n  \nGetting Started\nModules\nUse Cases\nReference Docs\nLangChain Ecosystem\nAdditional Resources\nBy Harrison Chase\n    \n      © Copyright 2023, Harrison Chase.\n      \n  Last updated on Apr 14, 2023.\n  &#39;, metadata={&#39;source&#39;: &#39;rtdocs/langchain.readthedocs.io/en/latest/index.html&#39;})]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
rm<span class="w"> </span>-rf<span class="w"> </span>rtdocs
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />
<ul>
<li><a target="_blank" rel="noopener" href="https://zenn.dev/tatsui/articles/langchain-chatbot">ChatGPT Chatbot for Internal Use</a><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/tatsu-i/chatbot-sample">https://github.com/tatsu-i/chatbot-sample</a></li>
</ul>
</li>
</ul>
<p>TODO:</p>
<ul>
<li>提示模版的中文化</li>
<li>启示、自我提示、自我认知的模型化？</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">&#182;</a></h3><p>Have you ever encountered a problem when using ChatGPT to search for the latest information? The current language model of ChatGPT (gpt-3.5-turbo-0301) was trained on data up until September 2021, so it may not be able to answer questions about the latest information accurately.</p>
<p>In this article, we will explain how to create a chatbot that can use chain of thought to respond, by teaching ChatGPT new knowledge.</p>
<h3 id="Preparing-and-importing-training-data">Preparing and importing training data<a class="anchor-link" href="#Preparing-and-importing-training-data">&#182;</a></h3><p>First, clone a repository as training data.</p>
<p>Next, import the repository files as text files using the following code, which contains the OpenAI API key.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">from</span> <span class="nn">langchain.document_loaders</span> <span class="kn">import</span> <span class="n">DirectoryLoader</span><span class="p">,</span> <span class="n">TextLoader</span>
<span class="kn">from</span> <span class="nn">langchain.embeddings</span> <span class="kn">import</span> <span class="n">OpenAIEmbeddings</span>
<span class="kn">from</span> <span class="nn">langchain.text_splitter</span> <span class="kn">import</span> <span class="n">RecursiveCharacterTextSplitter</span>
<span class="kn">from</span> <span class="nn">langchain.vectorstores.faiss</span> <span class="kn">import</span> <span class="n">FAISS</span>

<span class="k">def</span> <span class="nf">get_docs</span><span class="p">(</span><span class="n">dir_name</span><span class="p">):</span>
    <span class="c1"># (1) Import a series of documents.</span>
    <span class="n">loader</span> <span class="o">=</span> <span class="n">DirectoryLoader</span><span class="p">(</span><span class="n">dir_name</span><span class="p">,</span> <span class="n">loader_cls</span><span class="o">=</span><span class="n">TextLoader</span><span class="p">,</span> <span class="n">silent_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">raw_documents</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="c1"># (2) Split them into small chunks.</span>
    <span class="n">text_splitter</span> <span class="o">=</span> <span class="n">RecursiveCharacterTextSplitter</span><span class="p">(</span>
        <span class="n">chunk_size</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
        <span class="n">chunk_overlap</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">text_splitter</span><span class="o">.</span><span class="n">split_documents</span><span class="p">(</span><span class="n">raw_documents</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">ingest_docs</span><span class="p">(</span><span class="n">dir_name</span><span class="p">):</span>
    <span class="n">documents</span> <span class="o">=</span> <span class="n">get_docs</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>
    <span class="c1"># (3) Create embeddings for each document (using text-embedding-ada-002).</span>
    <span class="n">embeddings</span> <span class="o">=</span> <span class="n">OpenAIEmbeddings</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">FAISS</span><span class="o">.</span><span class="n">from_documents</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">)</span>

<span class="n">vectorstore</span> <span class="o">=</span> <span class="n">ingest_docs</span><span class="p">(</span><span class="s1">&#39;_posts/ultimate-facts&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">EdgeGPT</span> <span class="kn">import</span> <span class="n">Chatbot</span> <span class="k">as</span> <span class="n">Bing</span><span class="p">,</span> <span class="n">ConversationStyle</span>

<span class="n">bing</span> <span class="o">=</span> <span class="n">Bing</span><span class="p">(</span><span class="n">cookiePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~/.config/EdgeGPT/cookies.json&#39;</span><span class="p">))</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">ask</span><span class="p">(</span><span class="n">prompt</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">bing</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span>
        <span class="n">prompt</span> <span class="o">=</span> <span class="n">prompt</span><span class="p">,</span>
        <span class="n">conversation_style</span> <span class="o">=</span> <span class="n">ConversationStyle</span><span class="o">.</span><span class="n">balanced</span><span class="p">,</span>
    <span class="p">))[</span><span class="s1">&#39;item&#39;</span><span class="p">][</span><span class="s1">&#39;messages&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;adaptiveCards&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;body&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">await</span> <span class="n">ask</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">text-embedding-ada-002 是什么？</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>text-embedding-ada-002 是 OpenAI 的一个新的嵌入模型，它替换了五个用于文本搜索、文本相似度和代码搜索的单独模型，并在大多数任务上优于我们以前最强大的模型 Davinci，同时价格降低了 99.8%[^1^]。您可以通过向嵌入 API 端点发送文本字符串以及选择嵌入模型 ID（例如 text-embedding-ada-002）来获取嵌入[^2^]。

---

[1]: https://openai.com/blog/new-and-improved-embedding-model/ &#34;New and improved embedding model - openai.com&#34;
[2]: https://platform.openai.com/docs/guides/embeddings &#34;Embeddings - OpenAI API&#34;

text-embedding-ada-002 是 OpenAI 的一个新的嵌入模型，它替换了五个用于文本搜索、文本相似度和代码搜索的单独模型，并在大多数任务上优于我们以前最强大的模型 Davinci，同时价格降低了 99.8%[^1^][1]。您可以通过向嵌入 API 端点发送文本字符串以及选择嵌入模型 ID（例如 text-embedding-ada-002）来获取嵌入[^2^][2]。

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr />

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Creating-a-chatbot">Creating a chatbot<a class="anchor-link" href="#Creating-a-chatbot">&#182;</a></h3><p>Now, we will create a simple chatbot using the LLM chain.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<pre><code>/usr/local/anaconda3/envs/biobot/lib/python3.10/site-packages/langchain/chains/conversational_retrieval/base.py:191: UserWarning: `ChatVectorDBChain` is deprecated - please use `from langchain.chains import ConversationalRetrievalChain`
</code></pre>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.langchain.dev/retrieval/">LangChain's Retrieval Plugin</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/chains/index_examples/chat_vector_db.html">Chat Over Documents with Chat History</a></li>
</ul>
<hr />
<p>LangChain GitHub</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/tree/master/langchain/document_loaders">LangChain Document Loaders</a><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/url_selenium.py">Loader that uses Selenium to load URLs</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/url_playwright.py">Loader that uses Playwright to load URLs</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/git.py">Loads files from a Git repository</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/notebook.py">Loader that loads .ipynb notebook files</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/url.py">Load HTML files of URLs</a>
=&gt; <a target="_blank" rel="noopener" href="https://github.com/Unstructured-IO/unstructured/blob/main/unstructured/partition/auto.py">from unstructured.partition.auto import partition</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/twitter.py">Read tweets of user twitter handle</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/googledrive.py">Load data from Google Drive</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/pdf.py">Load PDF files</a><ul>
<li>todo: <a target="_blank" rel="noopener" href="https://arxiv.org/pdf/2304.03442.pdf">https://arxiv.org/pdf/2304.03442.pdf</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/python.py">Load Python files as text files</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hwchase17/langchain/blob/master/langchain/document_loaders/epub.py">Load EPub files as unstructured files</a></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">langchain.chains.llm</span> <span class="kn">import</span> <span class="n">LLMChain</span>
<span class="kn">from</span> <span class="nn">langchain.callbacks.base</span> <span class="kn">import</span> <span class="n">CallbackManager</span>
<span class="kn">from</span> <span class="nn">langchain.callbacks.streaming_stdout</span> <span class="kn">import</span> <span class="n">StreamingStdOutCallbackHandler</span>
<span class="kn">from</span> <span class="nn">langchain.chains.chat_vector_db.prompts</span> <span class="kn">import</span> <span class="n">CONDENSE_QUESTION_PROMPT</span><span class="p">,</span> <span class="n">QA_PROMPT</span>
<span class="kn">from</span> <span class="nn">langchain.chains.question_answering</span> <span class="kn">import</span> <span class="n">load_qa_chain</span>
<span class="kn">from</span> <span class="nn">langchain.vectorstores.base</span> <span class="kn">import</span> <span class="n">VectorStore</span>
<span class="kn">from</span> <span class="nn">langchain.chains</span> <span class="kn">import</span> <span class="n">ConversationalRetrievalChain</span>
<span class="kn">from</span> <span class="nn">langchain.chat_models</span> <span class="kn">import</span> <span class="n">ChatOpenAI</span>

<span class="c1"># Callback function to stream answers to stdout.</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">CallbackManager</span><span class="p">([</span><span class="n">StreamingStdOutCallbackHandler</span><span class="p">()])</span>

<span class="n">streaming_llm</span> <span class="o">=</span> <span class="n">ChatOpenAI</span><span class="p">(</span><span class="n">streaming</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">callback_manager</span><span class="o">=</span><span class="n">manager</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">question_gen_llm</span> <span class="o">=</span> <span class="n">ChatOpenAI</span><span class="p">(</span><span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">callback_manager</span><span class="o">=</span><span class="n">manager</span><span class="p">)</span>
<span class="c1"># Prompt to generate independent questions by incorporating chat history and a new question.</span>
<span class="n">question_generator</span> <span class="o">=</span> <span class="n">LLMChain</span><span class="p">(</span><span class="n">llm</span><span class="o">=</span><span class="n">question_gen_llm</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">CONDENSE_QUESTION_PROMPT</span><span class="p">)</span>
<span class="c1"># Pass in documents and a standalone prompt to answer questions.</span>
<span class="n">doc_chain</span> <span class="o">=</span> <span class="n">load_qa_chain</span><span class="p">(</span><span class="n">streaming_llm</span><span class="p">,</span> <span class="n">chain_type</span><span class="o">=</span><span class="s1">&#39;stuff&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">QA_PROMPT</span><span class="p">)</span>
<span class="c1"># Generate prompts from embedding model.</span>
<span class="n">qa</span> <span class="o">=</span> <span class="n">ConversationalRetrievalChain</span><span class="p">(</span><span class="n">retriever</span><span class="o">=</span><span class="n">vectorstore</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">(),</span> <span class="n">combine_docs_chain</span><span class="o">=</span><span class="n">doc_chain</span><span class="p">,</span> <span class="n">question_generator</span><span class="o">=</span><span class="n">question_generator</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The prompt given to ChatGPT's API is created in the following steps.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">question</span> <span class="o">=</span> <span class="s1">&#39;What makes Remix different from existing frameworks? Please list in bullet points in English.&#39;</span>
<span class="n">qa</span><span class="p">({</span><span class="s1">&#39;question&#39;</span><span class="p">:</span> <span class="n">question</span><span class="p">,</span> <span class="s1">&#39;chat_history&#39;</span><span class="p">:</span> <span class="p">[]})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>The given context does not provide information about Remix or any existing frameworks, so it is not possible to answer this question.</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>{&#39;question&#39;: &#39;What makes Remix different from existing frameworks? Please list in bullet points in English.&#39;,
 &#39;chat_history&#39;: [],
 &#39;answer&#39;: &#39;The given context does not provide information about Remix or any existing frameworks, so it is not possible to answer this question.&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">question</span> <span class="o">=</span> <span class="s1">&#39;你知道什么？&#39;</span>
<span class="n">qa</span><span class="p">({</span><span class="s1">&#39;question&#39;</span><span class="p">:</span> <span class="n">question</span><span class="p">,</span> <span class="s1">&#39;chat_history&#39;</span><span class="p">:</span> <span class="p">[]})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>I don&#39;t know. The context provided is a collection of excerpts from different sources and it is not clear what specific information is being referred to.</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>{&#39;question&#39;: &#39;你知道什么？&#39;,
 &#39;chat_history&#39;: [],
 &#39;answer&#39;: &#34;I don&#39;t know. The context provided is a collection of excerpts from different sources and it is not clear what specific information is being referred to.&#34;}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">question</span> <span class="o">=</span> <span class="s1">&#39;你知道什么？&#39;</span>
<span class="n">qa</span><span class="p">({</span><span class="s1">&#39;question&#39;</span><span class="p">:</span> <span class="n">question</span><span class="p">,</span> <span class="s1">&#39;chat_history&#39;</span><span class="p">:</span> <span class="p">[]})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>I am an AI language model and I only have access to the information provided in the context above. From the context, it discusses topics such as the nature of science, psychology, philosophy, and religion. It also touches on concepts such as truth, reality, consciousness, and perception. However, it is difficult to provide a specific answer to your question because it is very broad. Please provide more context or a specific question for me to answer.</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>{&#39;question&#39;: &#39;你知道什么？&#39;,
 &#39;chat_history&#39;: [],
 &#39;answer&#39;: &#39;I am an AI language model and I only have access to the information provided in the context above. From the context, it discusses topics such as the nature of science, psychology, philosophy, and religion. It also touches on concepts such as truth, reality, consciousness, and perception. However, it is difficult to provide a specific answer to your question because it is very broad. Please provide more context or a specific question for me to answer.&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Ask-a-question">Ask a question<a class="anchor-link" href="#Ask-a-question">&#182;</a></h3><pre><code>How is Remix different from existing frameworks?
Please list in bullet points in Japanese.
</code></pre>
<p>The following bullet points will be output as an answer summarizing the context.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Get context related to the question from the embedding model</span>
<span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">vectorstore</span><span class="o">.</span><span class="n">similarity_search</span><span class="p">(</span><span class="n">question</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>page_content=&#39;&gt; 我们刚刚知道自然科学借以掌握质的方法––形成量的概念的方法。我们必须提出的问题是，这种方法是不是也能够适用于主观的意识的质。按照我们前面所说，为了使这种方法能够加以运用，必须有与这些质充分确定地、唯一地联系着的空间变化。如果情况真的如此，那么这个问题就可以通过空间–时间的重合方法来解决，因而**测量**便是可能的。但是，这种重合的方法本质上就是进行物理的观察，而就内省法来说，却不存在物理的观察这种事情。由此立刻就可以得出结论：心理学沿着内省的途径决不可能达到知识的理想。因此，它必须尽量使用物理的观察方法来达到它的目的。但这是不是可能的呢？是不是有依存于意识的质的空间变化，就像例如在光学中干涉带的宽度依存于颜色，在电学中磁铁的偏转度依存于磁场的强度那样呢？\n&gt; 现在我们知道，事实上应当承认在主观的质和推断出来的客观世界之间有一种确切规定的、一义的配列关系。大量的经验材料告诉我们，我们可以发现，至少必须假设与所有经验唯一地联系着的“物理的”过程的存在。没有什么意识的质不可能受到作用于身体的力的影响。的确，我们甚至能够用一种简单的物理方法，例如吸进一种气体，就把意识全部消除掉。我们的行动与我们的意志经验相联系，幻觉与身体的疲惫相联系，抑郁症的发作与消化的紊乱相联系。为了研究这类相互联系，心的理论必须抛弃纯粹内省的方法而成为**生理的**心理学。只有这个学科才能在理论上达到对心理的东西的完全的知识。借助于这样一种心理学，我们就可以用概念和所与的主观的质相配列，正如我们能够用概念与推论出来的客观的质相配列一样。这样，主观的质就像客观的质一样成为可知的了。&#39; metadata={&#39;source&#39;: &#39;_posts/ultimate-facts/Neuroscience.md&#39;}

page_content=&#39;真理、真实；神造真实、人造真实；真实，想象；记忆，拟构。\n如果哲学更像「真理」，那么各类科学就更像「真实」。如果物理学更像「真理」，那么化学就更像「真实」。如果化学更像「真理」，那么生物学、生理学就更像「真实」。如果生理学更像「真理」，那么脑科学、神经科学就更像「真实」。\n如果理科更像「神造真实」，那么工科就更像「人造真实」。如果生理学更像「神造真实」，那么医学、药学就更像「人造真实」。\n\n---\n\n&gt; 我只是一个碳族生物；一个土生土长的地球人¹。贵主耶稣是灵族人吧。而木星上的风暴²可以拥有怎样的生命和意识呢？贵主耶稣在木星上能否与木星人一起生活和交往呢？\n\n&gt; ¹ 地球人 =&gt; 《费曼讲座：宇称不守恒定律和如何与外星人交流》\n\n&gt; ² 风暴 =&gt;\n&gt; 当那一天，到了傍晚，耶稣对他们说：『我们渡到那边去吧。』他们就离开群众，照他在船上的情况把他带走；还有别的船也跟他在一起。当下起了**大暴风**，波浪泼进船内，甚至船简直满了！耶稣竟在船尾上靠着枕头睡觉呢；门徒就叫醒了他，对他说：『老师，我们丧命，你不在意么？』耶稣醒起来，斥责³那风，向海说：『不要作声！噤默罢！』那风不狂吹，便大大平静了。耶稣对他们说：『为什么这么胆怯呢？怎么没有信心呢？』他们就大起了敬畏的心，直彼此说：『这个人到底是谁？连风和海也听从他！』\n (马可福音 4:35-41 吕振中)\n\n&gt; ³ 斥责 =&gt; 『ワンパンマン』：サイタマ？キング？\n\n↓↓--------------------继续修订--------------------↓↓\n\n圣经信仰之神经心理学实证纲领\n父的自我信息，是指，对于圣灵的表征。\n纯粹的圣经，含于，父的自我信息。\n从「纯粹的基督徒」到「超基督徒」「超级赌徒」\n\n吾否认圣经中上帝的名，因为那是人们创造的。&#39; metadata={&#39;source&#39;: &#39;_posts/ultimate-facts/终极真实.md&#39;}

page_content=&#39;&gt; ³ 斥责 =&gt; 『ワンパンマン』：サイタマ？キング？\n\n↓↓--------------------继续修订--------------------↓↓\n\n圣经信仰之神经心理学实证纲领\n父的自我信息，是指，对于圣灵的表征。\n纯粹的圣经，含于，父的自我信息。\n从「纯粹的基督徒」到「超基督徒」「超级赌徒」\n\n吾否认圣经中上帝的名，因为那是人们创造的。\n\n超越神论，不可知论；信仰；宁死不屈，抗争到底\n对于神圣生命的信心？或，亲密关系？\n坚贞，「甘愿承担自己的罪罚」是《古兰经》的价值所在。\n真诚、勇敢、坚贞，耶稣的「甘愿承担」是《圣经》的价值所在。\n\n吾，若不是因为怯懦，又怎么会祷告呢？\n所以，吾，应该要，放弃，那种、对于其他的心灵的畏惧、所联结着的祷告。以耶稣为榜样。\n人子要经受三日地狱之火的洗。罪全部被烧尽了后，第三日复活。\n我所爱慕的必定是父所喜爱的，因为父从始至终都在吸引我、塑造我的爱慕。\n我所爱慕的若是父所不喜爱的，父必定会改变我。所以，我总是晓得父的喜爱。\n人子，与父和好，与父为友，爱父并顺从祂。与父同在，就有勇气。与父同行，就有希望。\n子永远与父同在，从未分离。\n「吾要成为超人。」\n「在吾的生活中显明父的荣耀。」\n祷告，是，对于子灵的表征。\n\n感，分为，虚感、实感。\n虚感，分为，信（？）、思感、愉快感、位置感。\n实感，分为，色感、声感、香感、味感、触感、缩紧感、疼痛感、瘙痒感、冷热感。\n\n体，是指，广延。\n\n感、体，平行地，变化。\n感、体，分割的，平行性原理\n感的统合，预示着，体的核心。\n体的核心：在感的集合中占比最大的体。\n\n信，是一种，感。（联结？极深的记忆？）\n灵，是指，具有自我独特视角的、体。 =&gt; “我是谁？”\n《圣经》说：信、灵，平行地，变化。\n在苦难中持守坚忍为何能增加信心呢？&#39; metadata={&#39;source&#39;: &#39;_posts/ultimate-facts/终极真实.md&#39;}

page_content=&#39;问题，是指，对于某次偶然变化的疑问。\n解答，是指，对于某种必然变化的概括、对于某种偶然变化的适应措施。\n\n技术，是指，问题概括及其解法。\n程序，是指，数据结构及其算法。\n模型，是指，对于拟实的技术。\n建模，是指，对于拟实的计划。\n解模，是指，对于拟实的实施。\n软件模型，是指，对于拟实的程序。\n软件建模，是指，对于拟实的编程。\n软件解模，是指，对于拟实的进程。\n\n模拟，分为，拟实、拟虚。\n来原，是指，与模型对应的事实。\n\n当即行动，增强，对于某种偶然变化的适应力。\n但，人会拖延、不愿儆醒\n\n独立、与、交通，对于联结的交通，更不朽的存在形式\n更不朽的心思、身体，永远不朽的平安\n\n兴趣、快乐、生活情趣；佛学、哲学，作为，一种思维训练\n\n弊害、痛苦，错误、误信，有限的价值、终会朽坏；佛学、消极的哲学，作为，一种信仰；\n忽视、漠视，无私、无我、虚空、无恥、不惭\n去分别，就是，注视；不去分别，就是，漠视；\n漠视伤害，导致着，忘记伤害\n走向虚空，就是，放弃羞耻、光荣、尊贵、荣耀\n佛学的惊奇性质的信心，导致着，漠视。\n\n---\n\n&gt; 因为依顺着上帝而有的忧愁能生出不后悔的忏悔来、以至于得救；而世俗的忧愁却能生出死亡。\n(哥林多后书 7:10 吕振中)\n\n「金刚经」的邪灵，完全地，杀死了，吾的心灵。\n真常唯心系，曾经，在吾的心灵中，孕育，却流产了。\n\n忘罪，忘无明。\n\n积极的态度；佛教（真常唯心系）唯一的「用处」就是：让人不再惧怕死亡、平安地享受死亡\n基督教，比，真常唯心系，更加清晰。\n已成、与、未成；易信、与、难信；注意频次，信心，快乐、爱，恐惧、严肃，惊奇、敬畏；对于实感的表征之信，分别由惊奇（客观）、敬畏（主观）而来的信心\n某些次表征的联结；「信」，意味着、某种与真实的关系，是一种、「成」&#39; metadata={&#39;source&#39;: &#39;_posts/ultimate-facts/终极真实.md&#39;}

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<pre><code>Remix's job is to cross the center of the stack and then get out of your way. We avoid as many &quot;Remixisms&quot; as possible and instead make it easier to use the standard APIs the web already has.

This one is more for us. We've been educators for the 5 years before Remix. Our tagline is Build Better Websites. We also think of it with a little extra on the end: Build Better Websites, Sometimes with Remix. If you get good at Remix, you will accidentally get good at web development in general.

Remix's APIs make it convenient to use the fundamental Browser/HTTP/JavaScript, but those technologies are not hidden from you.

Additionally, if Remix doesn't have an adapter for your server already, you can look at the source of one of the adapters and build your own.

## Server Framework
If you're familiar with server-side MVC web frameworks like Rails and Laravel, Remix is the View and Controller, but it leaves the Model up to you. There are a lot of great databases, ORMs, mailers, etc. in the JavaScript ecosystem to fill that space. Remix also has helpers around the Fetch API for cookie and session management.

Instead of having a split between View and Controller, Remix Route modules take on both responsibilities.

Most server-side frameworks are &quot;model focused&quot;. A controller manages multiple URLs for a single model.

## Welcome to Remix!
We are happy you're here!

Remix is a full stack web framework that lets you focus on the user interface and work back through web fundamentals to deliver a fast, slick, and resilient user experience that deploys to any Node.js server and even non-Node.js environments at the edge like Cloudflare Workers.

Want to know more? Read the Technical Explanation of Remix

This repository contains the Remix source code. This repo is a work in progress, so we appreciate your patience as we figure things out.

## Documentation
For documentation about Remix, please
</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Final-Answers:">Final Answers:<a class="anchor-link" href="#Final-Answers:">&#182;</a></h3><ul>
<li>Remix aims to make it easy to use standard APIs.</li>
<li>You can learn about web development in general with Remix.</li>
<li>Remix is a framework that plays the role of both the View and Controller.</li>
<li>Remix leaves the model to the user.</li>
<li>Remix provides helpers for the Fetch API.</li>
<li>Remix can be deployed in non-Node.js environments such as Node.js servers and Cloudflare Workers.</li>
</ul>
<h3 id="Notes-on-API-usage:">Notes on API usage:<a class="anchor-link" href="#Notes-on-API-usage:">&#182;</a></h3><p>Regarding ChatGPT on the web, it is currently still an opt-out format (not used for retraining if you apply) as of March 10, 2023, but the ChatGPI API is an opt-in format (not used for retraining unless you apply), and it has been decided that it will not be used for actual model improvement. (It is stored for 30 days for legal monitoring purposes.) Since execution via the API reduces the risk of leakage to third parties other than OpenAI and is not used for retraining, the threshold for using confidential information with ChatGPT seems to have been lowered. The price of the API (gpt-3.5-turbo) is relatively inexpensive at 0.002 dollars per 1000 tokens, while the embedded model (text-embedding-ada-002) is 0.0004 dollars per 1000 tokens. However, if you try to create an embedded model for a large number of files, it will cost more than expected. If the number of tokens cannot be predicted in advance, it is a good idea to calculate the price in advance and decide whether to execute it as follows:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">tiktoken</span>

<span class="n">encoding</span> <span class="o">=</span> <span class="n">tiktoken</span><span class="o">.</span><span class="n">encoding_for_model</span><span class="p">(</span><span class="s1">&#39;text-embedding-ada-002&#39;</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">get_docs</span><span class="p">(</span><span class="s1">&#39;_posts&#39;</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">+=</span> <span class="n">doc</span><span class="o">.</span><span class="n">page_content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="n">token_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">encoding</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">allowed_special</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Estimated price: </span><span class="si">{</span><span class="n">token_count</span><span class="o">*</span><span class="mf">0.00000004</span><span class="si">}</span><span class="s1"> USD&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Estimated price: 0.03964988 USD
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Summary:">Summary:<a class="anchor-link" href="#Summary:">&#182;</a></h3><p>Since ChatGPT learns using past data, it cannot answer questions about the latest information or information that is not publicly available on the internet. This time, by mixing context related to the question content into the prompt, we were able to answer questions about the latest data and files saved locally.</p>
<p>If this article has been even a little helpful to you, I would be delighted. If you have any questions or comments, please feel free to contact me.</p>

</div>
</div>
</div>
 




	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2023/04/06/Autonomous-Agents/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一页</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2023/03/21/Try-BioGPT/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>

  <script data-isso="https://jhub.name/isso/" src="https://jhub.name/isso/js/embed.min.js"></script>
  <section id="isso-thread"></section>
  
</section>

	
	</div> <!-- col-md-9/col-md-12 -->
	
	
		<div class="col-md-3"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2023-04-04 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/CoD/">CoD<span>16</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	

</div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2023 Andrew
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>

</html>
