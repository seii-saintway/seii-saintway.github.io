<!DOCTYPE HTML>
<html>

<head><meta name="generator" content="Hexo 3.9.0">

  <meta charset="utf-8">
  
  <title>第 5 页 | Andrew&#39;s Blog</title>
  <meta name="author" content="Andrew">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Andrew&#39;s Blog">

  
    <meta property="og:image" content="undefined">
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/notebook.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: { 
                    automatic: true 
                    }
                }
            });
        
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
    <!-- End of mathjax configuration -->

</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Andrew&#39;s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header">
  <h1>Andrew&#39;s Blog</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      PURSUE ULTIMATE FACTS
</div>    

		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-19 </div>
			<div class="article-title"><a href="/2019/10/19/Learn-BigQuery/" >Learn BigQuery</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html" target="_blank" rel="noopener">https://ipython.readthedocs.io/en/stable/interactive/magics.html</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
pip install --upgrade <span class="s1">&#39;google-cloud-bigquery[bqstorage,pandas]&#39;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Collecting google-cloud-bigquery[bqstorage,pandas]
  Downloading google_cloud_bigquery-2.30.1-py2.py3-none-any.whl (203 kB)
Collecting proto-plus&gt;=1.10.0
  Downloading proto_plus-1.19.8-py3-none-any.whl (45 kB)
Requirement already satisfied: packaging&gt;=14.3 in /opt/conda/lib/python3.9/site-packages (from google-cloud-bigquery[bqstorage,pandas]) (21.2)
Requirement already satisfied: protobuf&gt;=3.12.0 in /opt/conda/lib/python3.9/site-packages (from google-cloud-bigquery[bqstorage,pandas]) (3.18.1)
Collecting google-api-core[grpc]&lt;3.0.0dev,&gt;=1.29.0
  Downloading google_api_core-2.2.2-py2.py3-none-any.whl (95 kB)
Requirement already satisfied: python-dateutil&lt;3.0dev,&gt;=2.7.2 in /opt/conda/lib/python3.9/site-packages (from google-cloud-bigquery[bqstorage,pandas]) (2.8.2)
Collecting grpcio&lt;2.0dev,&gt;=1.38.1
  Downloading grpcio-1.42.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (4.0 MB)
Collecting google-resumable-media&lt;3.0dev,&gt;=0.6.0
  Downloading google_resumable_media-2.1.0-py2.py3-none-any.whl (75 kB)
Requirement already satisfied: requests&lt;3.0.0dev,&gt;=2.18.0 in /opt/conda/lib/python3.9/site-packages (from google-cloud-bigquery[bqstorage,pandas]) (2.26.0)
Collecting google-cloud-core&lt;3.0.0dev,&gt;=1.4.1
  Downloading google_cloud_core-2.2.1-py2.py3-none-any.whl (29 kB)
Requirement already satisfied: pyarrow&lt;7.0dev,&gt;=3.0.0 in /opt/conda/lib/python3.9/site-packages (from google-cloud-bigquery[bqstorage,pandas]) (6.0.0)
Collecting google-cloud-bigquery-storage&lt;3.0.0dev,&gt;=2.0.0
  Downloading google_cloud_bigquery_storage-2.10.1-py2.py3-none-any.whl (171 kB)
Requirement already satisfied: pandas&gt;=0.24.2 in /opt/conda/lib/python3.9/site-packages (from google-cloud-bigquery[bqstorage,pandas]) (1.3.4)
Requirement already satisfied: setuptools&gt;=40.3.0 in /opt/conda/lib/python3.9/site-packages (from google-api-core[grpc]&lt;3.0.0dev,&gt;=1.29.0-&gt;google-cloud-bigquery[bqstorage,pandas]) (59.1.1)
Collecting googleapis-common-protos&lt;2.0dev,&gt;=1.52.0
  Downloading googleapis_common_protos-1.53.0-py2.py3-none-any.whl (198 kB)
Collecting google-auth&lt;3.0dev,&gt;=1.25.0
  Downloading google_auth-2.3.3-py2.py3-none-any.whl (155 kB)
Collecting grpcio-status&lt;2.0dev,&gt;=1.33.2
  Downloading grpcio_status-1.42.0-py3-none-any.whl (10.0 kB)
Collecting libcst&gt;=0.2.5
  Downloading libcst-0.3.23-py3-none-any.whl (517 kB)
Collecting google-crc32c&lt;2.0dev,&gt;=1.0
  Downloading google_crc32c-1.3.0-cp39-cp39-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (36 kB)
Requirement already satisfied: six&gt;=1.5.2 in /opt/conda/lib/python3.9/site-packages (from grpcio&lt;2.0dev,&gt;=1.38.1-&gt;google-cloud-bigquery[bqstorage,pandas]) (1.16.0)
Requirement already satisfied: pyparsing&lt;3,&gt;=2.0.2 in /opt/conda/lib/python3.9/site-packages (from packaging&gt;=14.3-&gt;google-cloud-bigquery[bqstorage,pandas]) (2.4.7)
Requirement already satisfied: pytz&gt;=2017.3 in /opt/conda/lib/python3.9/site-packages (from pandas&gt;=0.24.2-&gt;google-cloud-bigquery[bqstorage,pandas]) (2021.3)
Requirement already satisfied: numpy&gt;=1.17.3 in /opt/conda/lib/python3.9/site-packages (from pandas&gt;=0.24.2-&gt;google-cloud-bigquery[bqstorage,pandas]) (1.20.3)
Collecting protobuf&gt;=3.12.0
  Downloading protobuf-3.19.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.1 MB)
Requirement already satisfied: certifi&gt;=2017.4.17 in /opt/conda/lib/python3.9/site-packages (from requests&lt;3.0.0dev,&gt;=2.18.0-&gt;google-cloud-bigquery[bqstorage,pandas]) (2021.10.8)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /opt/conda/lib/python3.9/site-packages (from requests&lt;3.0.0dev,&gt;=2.18.0-&gt;google-cloud-bigquery[bqstorage,pandas]) (1.26.7)
Requirement already satisfied: charset-normalizer~=2.0.0 in /opt/conda/lib/python3.9/site-packages (from requests&lt;3.0.0dev,&gt;=2.18.0-&gt;google-cloud-bigquery[bqstorage,pandas]) (2.0.0)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /opt/conda/lib/python3.9/site-packages (from requests&lt;3.0.0dev,&gt;=2.18.0-&gt;google-cloud-bigquery[bqstorage,pandas]) (3.1)
Collecting rsa&lt;5,&gt;=3.1.4
  Downloading rsa-4.8-py3-none-any.whl (39 kB)
Collecting cachetools&lt;5.0,&gt;=2.0.0
  Downloading cachetools-4.2.4-py3-none-any.whl (10 kB)
Collecting pyasn1-modules&gt;=0.2.1
  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)
Collecting typing-inspect&gt;=0.4.0
  Downloading typing_inspect-0.7.1-py3-none-any.whl (8.4 kB)
Requirement already satisfied: typing-extensions&gt;=3.7.4.2 in /opt/conda/lib/python3.9/site-packages (from libcst&gt;=0.2.5-&gt;google-cloud-bigquery-storage&lt;3.0.0dev,&gt;=2.0.0-&gt;google-cloud-bigquery[bqstorage,pandas]) (3.10.0.2)
Requirement already satisfied: pyyaml&gt;=5.2 in /opt/conda/lib/python3.9/site-packages (from libcst&gt;=0.2.5-&gt;google-cloud-bigquery-storage&lt;3.0.0dev,&gt;=2.0.0-&gt;google-cloud-bigquery[bqstorage,pandas]) (6.0)
Collecting pyasn1&lt;0.5.0,&gt;=0.4.6
  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)
Collecting mypy-extensions&gt;=0.3.0
  Downloading mypy_extensions-0.4.3-py2.py3-none-any.whl (4.5 kB)
Installing collected packages: pyasn1, rsa, pyasn1-modules, protobuf, cachetools, mypy-extensions, grpcio, googleapis-common-protos, google-auth, typing-inspect, grpcio-status, google-crc32c, google-api-core, proto-plus, libcst, google-resumable-media, google-cloud-core, google-cloud-bigquery-storage, google-cloud-bigquery
  Attempting uninstall: protobuf
    Found existing installation: protobuf 3.18.1
    Uninstalling protobuf-3.18.1:
      Successfully uninstalled protobuf-3.18.1
Successfully installed cachetools-4.2.4 google-api-core-2.2.2 google-auth-2.3.3 google-cloud-bigquery-2.30.1 google-cloud-bigquery-storage-2.10.1 google-cloud-core-2.2.1 google-crc32c-1.3.0 google-resumable-media-2.1.0 googleapis-common-protos-1.53.0 grpcio-1.42.0 grpcio-status-1.42.0 libcst-0.3.23 mypy-extensions-0.4.3 proto-plus-1.19.8 protobuf-3.19.1 pyasn1-0.4.8 pyasn1-modules-0.2.8 rsa-4.8 typing-inspect-0.7.1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> google.cloud.bigquery
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">bigquery</span> df_example
SELECT * FROM (
  SELECT
    [414016,
    5767168,
    89019964] AS phone_numbers
  UNION ALL
  SELECT
    [8708227,
    37637318] AS phone_numbers
  UNION ALL
  SELECT
    [9349460,
    84826376,
    9215080,
    26331650] AS phone_numbers)
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_example</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>{&#39;phone_numbers&#39;: {0: [414016, 5767168, 89019964],
  1: [8708227, 37637318],
  2: [9349460, 84826376, 9215080, 26331650]}}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">phone_number_strings_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">phone_numbers</span> <span class="ow">in</span> <span class="n">df_example</span><span class="p">[</span><span class="s1">&#39;phone_numbers&#39;</span><span class="p">]:</span>
  <span class="n">phone_number_strings</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">phone_number</span> <span class="ow">in</span> <span class="n">phone_numbers</span><span class="p">:</span>
    <span class="n">phone_number_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">phone_number</span><span class="si">:</span><span class="s1">08d</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">phone_number_strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(+81) </span><span class="si">{</span><span class="n">phone_number_string</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">phone_number_string</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
  <span class="n">phone_number_strings_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">phone_number_strings</span><span class="p">)</span>
<span class="n">df_example</span><span class="p">[</span><span class="s1">&#39;phone_number_strings&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">phone_number_strings_list</span>
<span class="k">del</span> <span class="n">df_example</span><span class="p">[</span><span class="s1">&#39;phone_numbers&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_example</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>{&#39;phone_number_strings&#39;: {0: [&#39;(+81) 0041-4016&#39;,
   &#39;(+81) 0576-7168&#39;,
   &#39;(+81) 8901-9964&#39;],
  1: [&#39;(+81) 0870-8227&#39;, &#39;(+81) 3763-7318&#39;],
  2: [&#39;(+81) 0934-9460&#39;,
   &#39;(+81) 8482-6376&#39;,
   &#39;(+81) 0921-5080&#39;,
   &#39;(+81) 2633-1650&#39;]}}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -HE pip install pandas_gbq
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Collecting pandas_gbq
  Downloading https://files.pythonhosted.org/packages/c0/cb/d82930a55728359eb40e42e487d83315b09cb2ba316f0e889f5d4b886614/pandas_gbq-0.14.1-py3-none-any.whl
Requirement already satisfied: google-auth in /opt/tljh/user/lib/python3.6/site-packages (from pandas_gbq) (1.6.3)
Requirement already satisfied: pandas&gt;=0.20.1 in /opt/tljh/user/lib/python3.6/site-packages (from pandas_gbq) (0.25.1)
Collecting google-auth-oauthlib (from pandas_gbq)
  Downloading https://files.pythonhosted.org/packages/b1/0e/0636cc1448a7abc444fb1b3a63655e294e0d2d49092dc3de05241be6d43c/google_auth_oauthlib-0.4.6-py2.py3-none-any.whl
Collecting pydata-google-auth (from pandas_gbq)
  Downloading https://files.pythonhosted.org/packages/d8/61/e4e0bae8906f3d2f460bc46c1ccd4a94caf7eaf65aa92421c48d7c56ef70/pydata_google_auth-1.2.0-py2.py3-none-any.whl
Requirement already satisfied: google-cloud-bigquery[bqstorage,pandas]&lt;3.0.0dev,&gt;=1.11.1 in /opt/tljh/user/lib/python3.6/site-packages (from pandas_gbq) (1.21.0)
Requirement already satisfied: setuptools in /opt/tljh/user/lib/python3.6/site-packages (from pandas_gbq) (41.4.0)
Requirement already satisfied: rsa&gt;=3.1.4 in /opt/tljh/user/lib/python3.6/site-packages (from google-auth-&gt;pandas_gbq) (4.0)
Requirement already satisfied: cachetools&gt;=2.0.0 in /opt/tljh/user/lib/python3.6/site-packages (from google-auth-&gt;pandas_gbq) (3.1.1)
Requirement already satisfied: pyasn1-modules&gt;=0.2.1 in /opt/tljh/user/lib/python3.6/site-packages (from google-auth-&gt;pandas_gbq) (0.2.6)
Requirement already satisfied: six&gt;=1.9.0 in /opt/tljh/user/lib/python3.6/site-packages (from google-auth-&gt;pandas_gbq) (1.12.0)
Requirement already satisfied: python-dateutil&gt;=2.6.1 in /opt/tljh/user/lib/python3.6/site-packages (from pandas&gt;=0.20.1-&gt;pandas_gbq) (2.8.0)
Requirement already satisfied: pytz&gt;=2017.2 in /opt/tljh/user/lib/python3.6/site-packages (from pandas&gt;=0.20.1-&gt;pandas_gbq) (2019.2)
Requirement already satisfied: numpy&gt;=1.13.3 in /opt/tljh/user/lib/python3.6/site-packages (from pandas&gt;=0.20.1-&gt;pandas_gbq) (1.17.2)
Requirement already satisfied: requests-oauthlib&gt;=0.7.0 in /opt/tljh/user/lib/python3.6/site-packages (from google-auth-oauthlib-&gt;pandas_gbq) (1.2.0)
Requirement already satisfied: google-cloud-core&lt;2.0dev,&gt;=1.0.3 in /opt/tljh/user/lib/python3.6/site-packages (from google-cloud-bigquery[bqstorage,pandas]&lt;3.0.0dev,&gt;=1.11.1-&gt;pandas_gbq) (1.0.3)
Requirement already satisfied: protobuf&gt;=3.6.0 in /opt/tljh/user/lib/python3.6/site-packages (from google-cloud-bigquery[bqstorage,pandas]&lt;3.0.0dev,&gt;=1.11.1-&gt;pandas_gbq) (3.13.0)
Requirement already satisfied: google-resumable-media!=0.4.0,&lt;0.5.0dev,&gt;=0.3.1 in /opt/tljh/user/lib/python3.6/site-packages (from google-cloud-bigquery[bqstorage,pandas]&lt;3.0.0dev,&gt;=1.11.1-&gt;pandas_gbq) (0.4.1)
Collecting google-cloud-bigquery-storage&lt;2.0.0dev,&gt;=0.6.0; extra == &#34;bqstorage&#34; (from google-cloud-bigquery[bqstorage,pandas]&lt;3.0.0dev,&gt;=1.11.1-&gt;pandas_gbq)
  Downloading https://files.pythonhosted.org/packages/42/9a/003822d79a535472c089ca39fb384b74b8a3624f4d5a1715c4c52059418d/google_cloud_bigquery_storage-1.1.0-py2.py3-none-any.whl (135kB)
     |████████████████████████████████| 143kB 37.3MB/s eta 0:00:01
Collecting pyarrow!=0.14.0,&gt;=0.13.0; extra == &#34;bqstorage&#34; (from google-cloud-bigquery[bqstorage,pandas]&lt;3.0.0dev,&gt;=1.11.1-&gt;pandas_gbq)
  Downloading https://files.pythonhosted.org/packages/5d/61/4160ed11e0c149182baafc3a5bed1fb04395ba40705556d03c9244fb57d4/pyarrow-6.0.0-cp36-cp36m-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (24.3MB)
     |████████████████████████████████| 24.4MB 43.3MB/s eta 0:00:01
Requirement already satisfied: pyasn1&gt;=0.1.3 in /opt/tljh/user/lib/python3.6/site-packages (from rsa&gt;=3.1.4-&gt;google-auth-&gt;pandas_gbq) (0.4.7)
Requirement already satisfied: requests&gt;=2.0.0 in /opt/tljh/user/lib/python3.6/site-packages (from requests-oauthlib&gt;=0.7.0-&gt;google-auth-oauthlib-&gt;pandas_gbq) (2.25.1)
Requirement already satisfied: oauthlib&gt;=3.0.0 in /opt/tljh/user/lib/python3.6/site-packages (from requests-oauthlib&gt;=0.7.0-&gt;google-auth-oauthlib-&gt;pandas_gbq) (3.1.0)
Requirement already satisfied: google-api-core&lt;2.0.0dev,&gt;=1.14.0 in /opt/tljh/user/lib/python3.6/site-packages (from google-cloud-core&lt;2.0dev,&gt;=1.0.3-&gt;google-cloud-bigquery[bqstorage,pandas]&lt;3.0.0dev,&gt;=1.11.1-&gt;pandas_gbq) (1.14.2)
Requirement already satisfied: idna&lt;3,&gt;=2.5 in /opt/tljh/user/lib/python3.6/site-packages (from requests&gt;=2.0.0-&gt;requests-oauthlib&gt;=0.7.0-&gt;google-auth-oauthlib-&gt;pandas_gbq) (2.8)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /opt/tljh/user/lib/python3.6/site-packages (from requests&gt;=2.0.0-&gt;requests-oauthlib&gt;=0.7.0-&gt;google-auth-oauthlib-&gt;pandas_gbq) (1.24.3)
Requirement already satisfied: chardet&lt;5,&gt;=3.0.2 in /opt/tljh/user/lib/python3.6/site-packages (from requests&gt;=2.0.0-&gt;requests-oauthlib&gt;=0.7.0-&gt;google-auth-oauthlib-&gt;pandas_gbq) (3.0.4)
Requirement already satisfied: certifi&gt;=2017.4.17 in /opt/tljh/user/lib/python3.6/site-packages (from requests&gt;=2.0.0-&gt;requests-oauthlib&gt;=0.7.0-&gt;google-auth-oauthlib-&gt;pandas_gbq) (2020.4.5.2)
Requirement already satisfied: googleapis-common-protos&lt;2.0dev,&gt;=1.6.0 in /opt/tljh/user/lib/python3.6/site-packages (from google-api-core&lt;2.0.0dev,&gt;=1.14.0-&gt;google-cloud-core&lt;2.0dev,&gt;=1.0.3-&gt;google-cloud-bigquery[bqstorage,pandas]&lt;3.0.0dev,&gt;=1.11.1-&gt;pandas_gbq) (1.6.0)
Installing collected packages: google-auth-oauthlib, pydata-google-auth, pandas-gbq, google-cloud-bigquery-storage, pyarrow
Successfully installed google-auth-oauthlib-0.4.6 google-cloud-bigquery-storage-1.1.0 pandas-gbq-0.14.1 pyarrow-6.0.0 pydata-google-auth-1.2.0
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://console.cloud.google.com/bigquery?project=sandbox-sheng" target="_blank" rel="noopener">https://console.cloud.google.com/bigquery?project=sandbox-sheng</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_example</span><span class="o">.</span><span class="n">to_gbq</span><span class="p">(</span><span class="n">project_id</span> <span class="o">=</span> <span class="s1">&#39;sandbox-sheng&#39;</span><span class="p">,</span> <span class="n">destination_table</span> <span class="o">=</span> <span class="s1">&#39;bigquery_learning.customers&#39;</span><span class="p">,</span> <span class="n">if_exists</span> <span class="o">=</span> <span class="s1">&#39;replace&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/jupyter-sheng_wei/.local/lib/python3.6/site-packages/google/auth/_default.py:66: UserWarning: Your application has authenticated using end user credentials from Google Cloud SDK. We recommend that most server applications use service accounts instead. If your application continues to use end user credentials from Cloud SDK, you might receive a &#34;quota exceeded&#34; or &#34;API not enabled&#34; error. For more information about service accounts, see https://cloud.google.com/docs/authentication/
  warnings.warn(_CLOUD_SDK_CREDENTIALS_WARNING)
1it [00:04,  4.10s/it]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">bigquery</span>
SELECT
  *
FROM
  `sandbox-sheng.bigquery_learning.customers`
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>phone_number_strings</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>['(+81) 0041-4016', '(+81) 0576-7168', '(+81) ...</td>
    </tr>
    <tr>
      <td>1</td>
      <td>['(+81) 0870-8227', '(+81) 3763-7318']</td>
    </tr>
    <tr>
      <td>2</td>
      <td>['(+81) 0934-9460', '(+81) 8482-6376', '(+81) ...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="IPython-Magics-for-BigQuery">IPython Magics for BigQuery<a class="anchor-link" href="#IPython-Magics-for-BigQuery">&#182;</a></h2><ul>
<li><a href="https://cloud.google.com/bigquery/docs/visualize-jupyter" target="_blank" rel="noopener">https://cloud.google.com/bigquery/docs/visualize-jupyter</a></li>
<li><a href="https://googleapis.dev/python/bigquery/latest/magics.html" target="_blank" rel="noopener">https://googleapis.dev/python/bigquery/latest/magics.html</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="c1"># from 30 days ago to 29 days ago</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=+</span><span class="mi">9</span><span class="p">)))</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=+</span><span class="mi">9</span><span class="p">)))</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">29</span><span class="p">)</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;start_date&#39;</span><span class="p">:</span> <span class="n">start_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S Asia/Tokyo&#39;</span><span class="p">),</span>
    <span class="s1">&#39;end_date&#39;</span><span class="p">:</span> <span class="n">end_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S Asia/Tokyo&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;start_date&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;end_date&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>2021-10-14 09:21:28 Asia/Tokyo
2021-10-15 09:21:28 Asia/Tokyo
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="o">%%</span><span class="n">bigquery</span> <span class="n">df</span> <span class="o">--</span><span class="n">param</span> <span class="err">$</span><span class="n">params</span>
<span class="n">SELECT</span>
  <span class="o">*</span>
<span class="n">FROM</span>
  <span class="err">`</span><span class="n">sandbox</span><span class="o">-</span><span class="n">sheng</span><span class="o">.</span><span class="n">fluentd</span><span class="o">.</span><span class="n">fluentd_test</span><span class="err">`</span>
<span class="n">WHERE</span>
  <span class="n">time</span> <span class="o">&gt;=</span> <span class="nd">@start_date</span>
  <span class="n">AND</span> <span class="n">time</span> <span class="o">&lt;</span> <span class="nd">@end_date</span>
<span class="n">ORDER</span> <span class="n">BY</span>
  <span class="n">time</span> <span class="n">ASC</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Read-BigQuery-Reference">Read <a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/lexical" target="_blank" rel="noopener">BigQuery Reference</a><a class="anchor-link" href="#Read-BigQuery-Reference">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/arrays" target="_blank" rel="noopener">https://cloud.google.com/bigquery/docs/reference/standard-sql/arrays</a></li>
<li><a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/string_functions" target="_blank" rel="noopener">https://cloud.google.com/bigquery/docs/reference/standard-sql/string_functions</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">bigquery</span>
SELECT
  ARRAY(
  SELECT
    CONCAT(&#39;(+81) &#39;, SUBSTR(FORMAT(&#39;%08d&#39;, phone_number), 0, 4), &#39;-&#39;, SUBSTR(FORMAT(&#39;%08d&#39;, phone_number), -4))
  FROM
    UNNEST(phone_numbers) AS phone_number )[OFFSET(0)] AS phone_number
FROM (
  SELECT
    [414016,
    5767168,
    89019964] AS phone_numbers
  UNION ALL
  SELECT
    [8708227,
    37637318] AS phone_numbers
  UNION ALL
  SELECT
    [9349460,
    84826376,
    9215080,
    26331650] AS phone_numbers)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>phone_number</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>(+81) 0041-4016</td>
    </tr>
    <tr>
      <td>1</td>
      <td>(+81) 0870-8227</td>
    </tr>
    <tr>
      <td>2</td>
      <td>(+81) 0934-9460</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/aggregate_functions#array_agg" target="_blank" rel="noopener">https://cloud.google.com/bigquery/docs/reference/standard-sql/aggregate_functions#array_agg</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">bigquery</span>
WITH fruits AS
  (SELECT &quot;apple&quot; AS fruit
   UNION ALL SELECT &quot;pear&quot; AS fruit
   UNION ALL SELECT &quot;banana&quot; AS fruit)
SELECT ARRAY_AGG(fruit ORDER BY fruit) AS fruit_basket
FROM fruits
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fruit_basket</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>[apple, banana, pear]</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">bigquery</span>
SELECT
  name,
  ARRAY_AGG( DISTINCT phone_number
  ORDER BY
    phone_number ASC )[OFFSET(0)] AS phone_number
FROM (
  SELECT
    &#39;Andrew&#39; AS name,
    414016 AS phone_number
  UNION ALL
  SELECT
    &#39;Andrew&#39; AS name,
    5767168 AS phone_number
  UNION ALL
  SELECT
    &#39;Andrew&#39; AS name,
    89019964 AS phone_number
  UNION ALL
  SELECT
    &#39;Andrew&#39; AS name,
    8708227 AS phone_number
  UNION ALL
  SELECT
    &#39;Andrew&#39; AS name,
    37637318 AS phone_number
  UNION ALL
  SELECT
    &#39;Kelly&#39; AS name,
    9349460 AS phone_number
  UNION ALL
  SELECT
    &#39;Kelly&#39; AS name,
    84826376 AS phone_number
  UNION ALL
  SELECT
    &#39;Kelly&#39; AS name,
    9215080 AS phone_number
  UNION ALL
  SELECT
    &#39;Kelly&#39; AS name,
    26331650 AS phone_number)
GROUP BY
  name
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>phone_number</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Andrew</td>
      <td>414016</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Kelly</td>
      <td>9215080</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/19/Learn-BigQuery/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-19 </div>
			<div class="article-title"><a href="/2019/10/19/Try-Jupyter-Dashboards/" >Try Jupyter Dashboards</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Jupyter-Dashboards">Jupyter Dashboards<a class="anchor-link" href="#Jupyter-Dashboards">&#182;</a></h1><p><a href="https://github.com/jupyter/dashboards" target="_blank" rel="noopener">https://github.com/jupyter/dashboards</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I think it is a bit like <code>appmode</code>.</p>
<blockquote><p><a href="https://github.com/oschuett/appmode" target="_blank" rel="noopener">https://github.com/oschuett/appmode</a></p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E pip install jupyter_dashboards
<span class="o">!</span>sudo -E jupyter dashboards quick-setup --sys-prefix
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Jupyter-Dashboards-Demos"><a href="https://jhub.name/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Fjupyter%2Fdashboards.git&amp;subPath=etc%2Fnotebooks&amp;app=notebook" target="_blank" rel="noopener">Jupyter Dashboards Demos</a><a class="anchor-link" href="#Jupyter-Dashboards-Demos">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -HE pip install -r ~/dashboards.git/requirements-demo.txt
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notebooks can not be well shown in Grid Layout with my Jupyter Dashboards.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E jupyter dashboards quick-remove --sys-prefix
</pre></div>

    </div>
</div>
</div>

</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/19/Try-Jupyter-Dashboards/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-19 </div>
			<div class="article-title"><a href="/2019/10/19/Try-Commuter/" >Try Commuter</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://github.com/nteract/commuter" target="_blank" rel="noopener">https://github.com/nteract/commuter</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E npm install @nteract/commuter -g
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E npm install --build-from-source canvas@2.6.0 -g --unsafe-perm<span class="o">=</span><span class="nb">true</span> --allow-root --verbose
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Turn-to-yarn">Turn to <code>yarn</code><a class="anchor-link" href="#Turn-to-yarn">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg <span class="p">|</span> sudo apt-key add -
<span class="nb">echo</span> <span class="s2">&quot;deb https://dl.yarnpkg.com/debian/ stable main&quot;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/yarn.list

sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install --no-install-recommends yarn
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E yarn global add @nteract/commuter
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Check-Install-Result">Check Install Result<a class="anchor-link" href="#Check-Install-Result">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat /usr/local/share/.config/yarn/global/node_modules/@nteract/commuter/package.json
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Concerning-commuter">Concerning <code>commuter</code><a class="anchor-link" href="#Concerning-commuter">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat /usr/local/share/.config/yarn/global/node_modules/@nteract/commuter/package.json <span class="p">|</span> grep -1 --color commuter
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>{
  &#34;name&#34;: &#34;@nteract/<span class="ansi-red-intense-fg ansi-bold">commuter</span>&#34;,
  &#34;version&#34;: &#34;5.9.0&#34;,
<span class="ansi-cyan-fg">--</span>
  &#34;bin&#34;: {
    &#34;<span class="ansi-red-intense-fg ansi-bold">commuter</span>&#34;: &#34;bin.js&#34;
  },
<span class="ansi-cyan-fg">--</span>
  },
  &#34;homepage&#34;: &#34;https://github.com/nteract/nteract/tree/master/applications/<span class="ansi-red-intense-fg ansi-bold">commuter</span>#readme&#34;,
  &#34;publishConfig&#34;: {
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Concerning-bin.js">Concerning <code>bin.js</code><a class="anchor-link" href="#Concerning-bin.js">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat /usr/local/share/.config/yarn/global/node_modules/@nteract/commuter/bin.js
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>#!/usr/bin/env node

process.env.NODE_ENV = &#34;production&#34;;

require(&#34;./lib/index.js&#34;);
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Concerning-backend">Concerning <code>backend</code><a class="anchor-link" href="#Concerning-backend">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat /usr/local/share/.config/yarn/global/node_modules/@nteract/commuter/package.json <span class="p">|</span> grep -1 --color backend
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>    &#34;build:frontend-for-production&#34;: &#34;next build&#34;,
    &#34;build:server&#34;: &#34;babel <span class="ansi-red-intense-fg ansi-bold">backend</span> -d lib&#34;,
    &#34;build:all&#34;: &#34;npm run build:server &amp;&amp; npm run build:frontend-for-production&#34;,
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sed -n <span class="s1">&#39;6,17p&#39;</span> /usr/local/share/.config/yarn/global/node_modules/@nteract/commuter/package.json
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>  &#34;scripts&#34;: {
    &#34;predev&#34;: &#34;npm run build:server&#34;,
    &#34;dev&#34;: &#34;NODE_ENV=development node lib/index.js&#34;,
    &#34;prestart&#34;: &#34;npm run build:all&#34;,
    &#34;start&#34;: &#34;NODE_ENV=production node lib/index.js&#34;,
    &#34;build&#34;: &#34;npm run build:all&#34;,
    &#34;build:frontend-for-production&#34;: &#34;next build&#34;,
    &#34;build:server&#34;: &#34;babel backend -d lib&#34;,
    &#34;build:all&#34;: &#34;npm run build:server &amp;&amp; npm run build:frontend-for-production&#34;,
    &#34;prepublishOnly&#34;: &#34;npm run build:all&#34;,
    &#34;test&#34;: &#34;jest&#34;
  },
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Concerning-index.js">Concerning <code>index.js</code><a class="anchor-link" href="#Concerning-index.js">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat /usr/local/share/.config/yarn/global/node_modules/@nteract/commuter/lib/index.js
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>&#34;use strict&#34;;

var log = require(&#34;log&#34;);

var createServer = require(&#34;./server&#34;);

createServer().then(function (server) {
  var port = server.address().port;
  console.log(log);
  log.info(&#34;Commuter server listening on port &#34; + port);
})[&#34;catch&#34;](function (e) {
  console.error(e);
  console.error(e.stack);
  process.exit(-10);
});</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Concerning-port">Concerning <code>port</code><a class="anchor-link" href="#Concerning-port">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat /usr/local/share/.config/yarn/global/node_modules/@nteract/commuter/pages/discover.js <span class="p">|</span> grep -w1 --color port
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>      // Server side, communicate with our local API
      const <span class="ansi-red-intense-fg ansi-bold">port</span> = process.env.COMMUTER_PORT || 4000;
      BASE_PATH = `http://127.0.0.1:${<span class="ansi-red-intense-fg ansi-bold">port</span>}/`;
    } else {
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Run-Commuter">Run Commuter<a class="anchor-link" href="#Run-Commuter">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>commuter
</pre></div>

    </div>
</div>
</div>

</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/19/Try-Commuter/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-13 </div>
			<div class="article-title"><a href="/2019/10/13/Try-PaperBoby/" >Try PaperBoby</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://github.com/timkpaine/paperboy" target="_blank" rel="noopener">https://github.com/timkpaine/paperboy</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span> ~ <span class="o">&amp;&amp;</span> git clone https://github.com/timkpaine/paperboy.git
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Cloning into &#39;paperboy&#39;...
remote: Enumerating objects: 21, done.
remote: Counting objects: 100% (21/21), done.
remote: Compressing objects: 100% (21/21), done.
remote: Total 3388 (delta 3), reused 3 (delta 0), pack-reused 3367
Receiving objects: 100% (3388/3388), 12.04 MiB | 22.38 MiB/s, done.
Resolving deltas: 100% (2277/2277), done.
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
<span class="nb">cd</span> ~/paperboy/
sudo -E npm install
sudo -E npm run build
sudo -E pip install -e .
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E python -m paperboy
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>CRITICAL:root:Using SQL backend
CRITICAL:root:Using SQL auth
CRITICAL:root:Using dummy scheduler
[2019-10-13 18:36:29 +0900] [2696] [INFO] Starting gunicorn 19.9.0
[2019-10-13 18:36:29 +0900] [2696] [INFO] Listening at: http://0.0.0.0:8080 (2696)
[2019-10-13 18:36:29 +0900] [2696] [INFO] Using worker: sync
[2019-10-13 18:36:29 +0900] [2701] [INFO] Booting worker with pid: 2701
CRITICAL:root:Storing user sheng_wei eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjEiLCJuYW1lIjoic2hlbmdfd2VpIn0.oKJsYgZJaj1dLoVR8JgTjfPGp2O8bf3jqmoRux1bNgw 1
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:Storing notebook &lt;Notebook(name=&#39;TEST&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 0 - 0
[2019-10-13 18:43:59 +0900] [2701] [ERROR] Error handling request /api/v1/jobs?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/job.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.jobs.store(req.context[&#39;user&#39;], req.params, self.session, self.scheduler))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/job.py&#34;, line 42, in store
    nb_sql = session.query(NotebookSQL).get(int(justid(notebookid)))
ValueError: invalid literal for int() with base 10: &#39;attachment.ipynb&#39;
[2019-10-13 18:44:22 +0900] [2701] [ERROR] Error handling request /api/v1/jobs?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/job.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.jobs.store(req.context[&#39;user&#39;], req.params, self.session, self.scheduler))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/job.py&#34;, line 42, in store
    nb_sql = session.query(NotebookSQL).get(int(justid(notebookid)))
ValueError: invalid literal for int() with base 10: &#39;attachment.ipynb&#39;
[2019-10-13 18:44:23 +0900] [2701] [ERROR] Error handling request /api/v1/jobs?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/job.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.jobs.store(req.context[&#39;user&#39;], req.params, self.session, self.scheduler))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/job.py&#34;, line 42, in store
    nb_sql = session.query(NotebookSQL).get(int(justid(notebookid)))
ValueError: invalid literal for int() with base 10: &#39;attachment.ipynb&#39;
[2019-10-13 18:44:23 +0900] [2701] [ERROR] Error handling request /api/v1/jobs?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/job.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.jobs.store(req.context[&#39;user&#39;], req.params, self.session, self.scheduler))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/job.py&#34;, line 42, in store
    nb_sql = session.query(NotebookSQL).get(int(justid(notebookid)))
ValueError: invalid literal for int() with base 10: &#39;attachment.ipynb&#39;
[2019-10-13 18:44:23 +0900] [2701] [ERROR] Error handling request /api/v1/jobs?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/job.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.jobs.store(req.context[&#39;user&#39;], req.params, self.session, self.scheduler))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/job.py&#34;, line 42, in store
    nb_sql = session.query(NotebookSQL).get(int(justid(notebookid)))
ValueError: invalid literal for int() with base 10: &#39;attachment.ipynb&#39;
CRITICAL:root:Storing job &lt;Job(name=&#39;TEST&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, notebook=&#39;&lt;Notebook(name=&#39;TEST&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;&#39;, start=&#39;2019-10-13 09:37:00&#39;, interval=&#39;minutely&#39;&gt;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 1 - 1
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 1 - 1
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 1 - 1
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:detail : 1, result : &lt;Job(name=&#39;TEST&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, notebook=&#39;&lt;Notebook(name=&#39;TEST&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;&#39;, start=&#39;2019-10-13 09:37:00&#39;, interval=&#39;minutely&#39;&gt;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 1 - 1
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 1 - 1
CRITICAL:root:detail : 1, result : &lt;Job(name=&#39;TEST&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, notebook=&#39;&lt;Notebook(name=&#39;TEST&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;&#39;, start=&#39;2019-10-13 09:37:00&#39;, interval=&#39;minutely&#39;&gt;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 1 - 1
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 1 - 1
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:detail : 1, result : &lt;Notebook(name=&#39;TEST&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;
CRITICAL:root:Storing notebook &lt;Notebook(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;
CRITICAL:root:detail : 2, result : &lt;Notebook(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;
[2019-10-13 18:54:20 +0900] [2701] [ERROR] Error handling request /api/v1/jobs?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/job.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.jobs.store(req.context[&#39;user&#39;], req.params, self.session, self.scheduler))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/job.py&#34;, line 42, in store
    nb_sql = session.query(NotebookSQL).get(int(justid(notebookid)))
ValueError: invalid literal for int() with base 10: &#39;BQ&#39;
[2019-10-13 18:54:35 +0900] [2701] [ERROR] Error handling request /api/v1/jobs?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/job.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.jobs.store(req.context[&#39;user&#39;], req.params, self.session, self.scheduler))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/job.py&#34;, line 42, in store
    nb_sql = session.query(NotebookSQL).get(int(justid(notebookid)))
ValueError: invalid literal for int() with base 10: &#39;BQ&#39;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:detail : 2, result : &lt;Notebook(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;
CRITICAL:root:Storing job &lt;Job(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, notebook=&#39;&lt;Notebook(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;&#39;, start=&#39;2019-10-13 09:51:00&#39;, interval=&#39;minutely&#39;&gt;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:detail : 2, result : &lt;Job(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, notebook=&#39;&lt;Notebook(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;&#39;, start=&#39;2019-10-13 09:51:00&#39;, interval=&#39;minutely&#39;&gt;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
[2019-10-13 18:59:11 +0900] [2696] [CRITICAL] WORKER TIMEOUT (pid:2701)
[2019-10-13 18:59:11 +0900] [2701] [INFO] Worker exiting (pid: 2701)
[2019-10-13 18:59:11 +0900] [2863] [INFO] Booting worker with pid: 2863
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
CRITICAL:root:detail : 2, result : &lt;Job(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, notebook=&#39;&lt;Notebook(name=&#39;BQ&#39;, user=&#39;&lt;User(name=&#39;sheng_wei&#39;)&gt;&#39;, privacy=&#39;public&#39;, level=&#39;production&#39;&gt;&#39;, start=&#39;2019-10-13 09:51:00&#39;, interval=&#39;minutely&#39;&gt;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 2 - 2
[2019-10-13 19:01:55 +0900] [2863] [ERROR] Error handling request /api/v1/reports?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/report.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.reports.store(req.context[&#39;user&#39;], req.params, self.session))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/report.py&#34;, line 50, in store
    jb_sql = session.query(JobSQL).get(int(justid(jobid)))
ValueError: invalid literal for int() with base 10: &#39;BQ&#39;
[2019-10-13 19:01:57 +0900] [2863] [ERROR] Error handling request /api/v1/reports?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/report.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.reports.store(req.context[&#39;user&#39;], req.params, self.session))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/report.py&#34;, line 50, in store
    jb_sql = session.query(JobSQL).get(int(justid(jobid)))
ValueError: invalid literal for int() with base 10: &#39;BQ&#39;
[2019-10-13 19:01:57 +0900] [2863] [ERROR] Error handling request /api/v1/reports?action=save
Traceback (most recent call last):
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 135, in handle
    self.handle_request(listener, req, client, addr)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/gunicorn/workers/sync.py&#34;, line 176, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File &#34;/opt/tljh/user/lib/python3.6/site-packages/falcon/api.py&#34;, line 244, in __call__
    responder(req, resp, **params)
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/resources/report.py&#34;, line 21, in on_post
    resp.body = json.dumps(self.db.reports.store(req.context[&#39;user&#39;], req.params, self.session))
  File &#34;/home/jupyter-sheng_wei/paperboy/paperboy/storage/sqla/report.py&#34;, line 50, in store
    jb_sql = session.query(JobSQL).get(int(justid(jobid)))
ValueError: invalid literal for int() with base 10: &#39;BQ&#39;
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.notebook.NotebookSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.job.JobSQL&#39;&gt;, result : 2 - 2
CRITICAL:root:list : &lt;class &#39;paperboy.storage.sqla.models.report.ReportSQL&#39;&gt;, result : 0 - 0
^C
[2019-10-13 19:02:42 +0900] [2696] [INFO] Handling signal: int
[2019-10-13 19:02:42 +0900] [2863] [INFO] Worker exiting (pid: 2863)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>The versions of dependencies are too low.</strong>
<strong>There are too many bugs.</strong></p>
<p><strong>It seems that the maintenance of PaperBoy has been stopped.</strong></p>
<p>Well. Maybe I can reuse some of the codes.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>But I found a new Jupyter Dashboard used by PaperBoy.</strong></p>
<ul>
<li><a href="https://github.com/voila-dashboards/voila" target="_blank" rel="noopener">https://github.com/voila-dashboards/voila</a></li>
</ul>

</div>
</div>
</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/13/Try-PaperBoby/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-08 </div>
			<div class="article-title"><a href="/2019/10/08/Try-Appmod-and-NBGitPuller/" >Try Appmod and NBGitPuller</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://mybinder.org/v2/gh/jupyterhub/nbgitpuller/master?urlpath=apps/binder%2Flink_generator.ipynb" target="_blank" rel="noopener">https://mybinder.org/v2/gh/jupyterhub/nbgitpuller/master?urlpath=apps/binder%2Flink_generator.ipynb</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a href="https://anvil.works/learn/tutorials/jupyter-notebook-to-web-app" target="_blank" rel="noopener">https://anvil.works/learn/tutorials/jupyter-notebook-to-web-app</a></li>
<li><a href="https://hackernoon.com/making-web-apps-with-jupyter-notebook-75eab8bdb092" target="_blank" rel="noopener">https://hackernoon.com/making-web-apps-with-jupyter-notebook-75eab8bdb092</a></li>
<li><a href="https://github.com/oschuett/appmode" target="_blank" rel="noopener">https://github.com/oschuett/appmode</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Try-Appmode">Try Appmode<a class="anchor-link" href="#Try-Appmode">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E pip install appmode
<span class="o">!</span>sudo -E jupyter nbextension     <span class="nb">enable</span> --py --sys-prefix appmode
<span class="o">!</span>sudo -E jupyter serverextension <span class="nb">enable</span> --py --sys-prefix appmode
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Try-NBGitPuller">Try NBGitPuller<a class="anchor-link" href="#Try-NBGitPuller">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E pip install -U nbgitpuller
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbgitpuller</span> <span class="kn">import</span> <span class="n">pull</span>
<span class="n">pull</span><span class="o">.</span><span class="vm">__file__</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbgitpuller</span> <span class="kn">import</span> <span class="n">handlers</span>
<span class="n">handlers</span><span class="o">.</span><span class="vm">__file__</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Change-repo_url-to-clone_cmd">Change <code>repo_url</code> to <code>clone_cmd</code><a class="anchor-link" href="#Change-repo_url-to-clone_cmd">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span> ~ <span class="o">&amp;&amp;</span> git clone --branch change-to-clone-command https://github.com/seii-saintway/nbgitpuller.git
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo cp ~/nbgitpuller/nbgitpuller/pull.py /opt/tljh/user/lib/python3.6/site-packages/nbgitpuller/pull.py
<span class="o">!</span>sudo cp ~/nbgitpuller/nbgitpuller/handlers.py /opt/tljh/user/lib/python3.6/site-packages/nbgitpuller/handlers.py
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><code>https://jhub.name</code></li>
<li><code>git clone https://github.com/seii-saintway/nbgitpuller</code></li>
<li><code>change-to-clone-command</code></li>
<li><code>binder/link_generator.ipynb</code></li>
<li><code>app</code></li>
</ul>
<p><a href="https://jhub.name/hub/user-redirect/git-pull?repo=git+clone+https%3A%2F%2Fgithub.com%2Fseii-saintway%2Fnbgitpuller&amp;branch=change-to-clone-command&amp;subPath=binder%2Flink_generator.ipynb&amp;app=app" target="_blank" rel="noopener">https://jhub.name/hub/user-redirect/git-pull?repo=git+clone+https%3A%2F%2Fgithub.com%2Fseii-saintway%2Fnbgitpuller&amp;branch=change-to-clone-command&amp;subPath=binder%2Flink_generator.ipynb&amp;app=app</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Installation">Installation<a class="anchor-link" href="#Installation">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E pip install git+https://github.com/seii-saintway/nbgitpuller@change-to-clone-command
</pre></div>

    </div>
</div>
</div>

</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/08/Try-Appmod-and-NBGitPuller/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-06 </div>
			<div class="article-title"><a href="/2019/10/06/Make-isso-HTTPS-with-TLJH-Traefik-Proxy/" >Make isso HTTPS with TLJH Traefik Proxy</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a href="https://github.com/containous/traefik/" target="_blank" rel="noopener">https://github.com/containous/traefik/</a></li>
<li><a href="https://traefik.io/" target="_blank" rel="noopener">https://traefik.io/</a></li>
<li><a href="https://docs.traefik.io/routing/overview/" target="_blank" rel="noopener">https://docs.traefik.io/routing/overview/</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Traefik-Dashboard">Traefik Dashboard<a class="anchor-link" href="#Traefik-Dashboard">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo apt install apache2-utils
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo sed -i <span class="s1">&#39;s/address = &quot;127.0.0.1:8099&quot;/address = &quot;:8099&quot;/g&#39;</span> /opt/tljh/state/traefik.toml
<span class="o">!</span>sudo sed -i <span class="s2">&quot;s/sourceRange = \[&#39;127.0.0.1&#39;\]/sourceRange = \[&#39;127.0.0.1&#39;, &#39;110.3.247.172&#39;\]/g&quot;</span> /opt/tljh/state/traefik.toml
<span class="o">!</span>sudo sed -i -e <span class="s2">&quot;s/users = \[&#39;api_admin:[^&#39;]*&#39;\]/users = \[&#39;</span><span class="k">$(</span>htpasswd -nb api_admin fdsa<span class="k">)</span><span class="s2">&#39;\]/g&quot;</span> /opt/tljh/state/traefik.toml
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo systemctl restart traefik
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo tljh-config reload hub
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>curl -u api_admin:fdsa jhub.name:8099
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>curl -u api_admin:fdsa localhost:8099
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="nx">javascript</span>
<span class="kr">const</span> <span class="nx">Http</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">Http</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nx">Http</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;http://jhub.name:8099&#39;</span><span class="p">);</span>
<span class="nx">Http</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">status</span> <span class="o">!=</span> <span class="mf">200</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="sb">`Error: </span><span class="si">${</span><span class="nx">Http</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Rollback-Settings">Rollback Settings<a class="anchor-link" href="#Rollback-Settings">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo tljh-config reload proxy
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Make-Isso-HTTPS-in-TLJH">Make Isso HTTPS in TLJH<a class="anchor-link" href="#Make-Isso-HTTPS-in-TLJH">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a href="https://github.com/jupyterhub/the-littlest-jupyterhub/blob/master/tljh/jupyterhub_config.py" target="_blank" rel="noopener">https://github.com/jupyterhub/the-littlest-jupyterhub/blob/master/tljh/jupyterhub_config.py</a></li>
<li><a href="https://github.com/jupyterhub/traefik-proxy/blob/master/jupyterhub_traefik_proxy/toml.py" target="_blank" rel="noopener">https://github.com/jupyterhub/traefik-proxy/blob/master/jupyterhub_traefik_proxy/toml.py</a></li>
<li><a href="https://jupyterhub-traefik-proxy.readthedocs.io/en/latest/toml.html#traefik-configuration" target="_blank" rel="noopener">https://jupyterhub-traefik-proxy.readthedocs.io/en/latest/toml.html#traefik-configuration</a></li>
<li><a href="https://docs.traefik.io/v1.7/basics/" target="_blank" rel="noopener">https://docs.traefik.io/v1.7/basics/</a></li>
<li><a href="https://posativ.org/isso/docs/setup/sub-uri/" target="_blank" rel="noopener">https://posativ.org/isso/docs/setup/sub-uri/</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
cat <span class="s">&lt;&lt; EOF | sudo tee -a /opt/tljh/state/rules.toml &gt; /dev/null</span>

<span class="s">[frontends.isso]</span>
<span class="s">backend = &quot;isso&quot;</span>
<span class="s">passHostHeader = true</span>

<span class="s">[frontends.isso.routes.f1]</span>
<span class="s">rule = &quot;PathPrefixStrip:/isso/&quot;</span>

<span class="s">[backends.isso.servers.s1]</span>
<span class="s">url = &quot;http://127.0.0.1:8000&quot;</span>
<span class="s">weight = 1</span>
<span class="s">EOF</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">env</span> http=http:\/\/jhub.name:8000\/
<span class="o">%</span><span class="k">env</span> https=https:\/\/jhub.name\/isso\/
<span class="o">!</span>sed -i -e <span class="s2">&quot;s/</span><span class="nv">$http</span><span class="s2">/</span><span class="nv">$https</span><span class="s2">/g&quot;</span> ~/hexo/themes/freemind/layout/_partial/post/comment.ejs
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Commit-Modifications">Commit Modifications<a class="anchor-link" href="#Commit-Modifications">&#182;</a></h2><p><a href="https://github.com/seii-saintway/hexo-theme-freemind/commit/9568c3160d3c917a8a986beedafb7836e02c2bce" target="_blank" rel="noopener">https://github.com/seii-saintway/hexo-theme-freemind/commit/9568c3160d3c917a8a986beedafb7836e02c2bce</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Change-file-watch-to-directory-in-TLJH-Traefik">Change file-watch to directory in TLJH Traefik<a class="anchor-link" href="#Change-file-watch-to-directory-in-TLJH-Traefik">&#182;</a></h3><p><a href="https://github.com/seii-saintway/the-littlest-jupyterhub/commit/e95d85e99187f9d65b748016807b28c256e77e39" target="_blank" rel="noopener">https://github.com/seii-saintway/the-littlest-jupyterhub/commit/e95d85e99187f9d65b748016807b28c256e77e39</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
cat <span class="s">&lt;&lt; EOF | sudo tee /opt/tljh/state/dynamic/isso.toml &gt; /dev/null</span>

<span class="s">[frontends.isso]</span>
<span class="s">backend = &quot;isso&quot;</span>
<span class="s">passHostHeader = true</span>

<span class="s">[frontends.isso.routes.f1]</span>
<span class="s">rule = &quot;PathPrefixStrip:/isso/&quot;</span>

<span class="s">[backends.isso.servers.s1]</span>
<span class="s">url = &quot;http://127.0.0.1:8000&quot;</span>
<span class="s">weight = 1</span>
<span class="s">EOF</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo /opt/tljh/hub/bin/python -m tljh.installer
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Granting passwordless sudo to JupyterHub admins...
Setting up user environment...


==&gt; WARNING: A newer version of conda exists. &lt;==
  current version: 4.5.8
  latest version: 4.7.12

Please update conda by running

    $ conda update -n base conda


Setting up JupyterHub...
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo cat /opt/tljh/installer.log
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>2019-10-13 15:21:02,889 Granting passwordless sudo to JupyterHub admins...
2019-10-13 15:21:02,890 Setting up user environment...
2019-10-13 15:21:26,052 Setting up JupyterHub...
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span> ~ <span class="o">&amp;&amp;</span> make restart-isso
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Isso-SQLite">Isso SQLite<a class="anchor-link" href="#Isso-SQLite">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
cat <span class="s">&lt;&lt; EOF | sudo tee /etc/isso.conf &gt; /dev/null</span>

<span class="s">[general]</span>

<span class="s">dbpath = /var/lib/isso/comments.db</span>

<span class="s">host =</span>
<span class="s">    http://seii-saintway.github.io</span>
<span class="s">    https://seii-saintway.github.io</span>
<span class="s">    http://digitypography.xyz</span>
<span class="s">    https://digitypography.xyz</span>

<span class="s">EOF</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Open-SQLite-database">Open SQLite database<a class="anchor-link" href="#Open-SQLite-database">&#182;</a></h3><div class="highlight"><pre><span></span>sqlite3 /var/lib/isso/comments.db
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;/var/lib/isso/comments.db&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">[(</span><span class="n">row</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * from comments&#39;</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[(&#39;110.3.247.0&#39;, &#39;# Privacy Policy&#39;),
 (&#39;113.38.215.0&#39;, &#39;# Continuous Purification&#39;),
 (&#39;110.3.247.0&#39;,
  &#39;### 3.11.4 隐秘通道\n\n隐秘通道（covert channel）的意思是说使用难以预料或不会引起注意的方式来发送信息。假设有一天系统管理员Sally觉得自己的那些用户花太多时间来玩了，因此她决定关闭email和即时消息，这样他们就不能聊天了。要解决这个问题，你和你的朋友都同意使用主目录中的一个你们都可以读取的文件来交流信息，你每隔一会儿就得检查一下该文件来查看新消息。这种超出乎预料的通信方式就是一个隐秘通道。\n\n隐秘通道很难取消。如果系统管理员Sally发现了你们这种基于文件的通信技术，她可以修改目录的权限，使得只有目录的属主才具有读取和搜索的权限，并限定目录属主也不能修改这种权限。在这样做的同时，她还可以确认你不能在其他地方（例如，/tmp）创建文件。（你的大部分程序都不能运行了，但是不要因此而责怪Sally。）即使是这样，你和你的朋友仍然可以相互显示其他用户士目录中的内容，这可以显示目录的修改日期和文件个数，这样你就可以根据这些可见的参数设计一种密码，并通过修改这些参数而进行通信。这是一种更复杂的隐秘通道，如果Sally对你们进行了更严格的限制，你们可以想出更古怪的法子来。\n\nSSH不能防止隐秘通道。对隐秘通道的分析和控制通常都是安全性很高的计算机系统的一部分，例如设计用来在同一个系统中的不同安全层次上安全地处理信息的系统。顺便说一下，SSH数据流本身就可以很好地用作一种隐秘通道：SSH会话的内容可能是一个巧克力馅饼的配方，而隐含的内容则可能是用Morse码表示这两个公司即将合并，只需要使用报文长度是奇数还是偶数来分别表示Morse码的短横线和点号即可。&#39;),
 (&#39;126.158.192.0&#39;, &#39;Try to build with Cosmos SDK&#39;),
 (&#39;126.158.192.0&#39;, &#39;Try to build with Cosmos SDK&#39;)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">[</span><span class="n">row</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * from preferences&#39;</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">[</span><span class="n">row</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * from threads&#39;</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[(1, &#39;/2019/07/17/%E5%BF%83%E6%83%85%E7%B3%9F%E9%80%8F%E4%BA%86/&#39;, None),
 (2, &#39;/2022/02/25/Declaration-of-the-Independence-of-Cyberspace/&#39;, None),
 (3, &#39;/2022/02/28/An-Independent-Stablecoin-of-Cyberspace/&#39;, None)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/06/Make-isso-HTTPS-with-TLJH-Traefik-Proxy/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-06 </div>
			<div class="article-title"><a href="/2019/10/06/Try-To-Import-Notebooks/" >Try To Import Notebooks</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">Try_To_Import_Python</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Try_To_Import_Python.py
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://jupyter-notebook.readthedocs.io/en/stable/examples/Notebook/Importing%20Notebooks.html" target="_blank" rel="noopener">https://jupyter-notebook.readthedocs.io/en/stable/examples/Notebook/Importing%20Notebooks.html</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here is some simple code to display the contents of a notebook
with syntax highlighting, etc.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">highlight</span>
<span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="n">PythonLexer</span>
<span class="kn">from</span> <span class="nn">pygments.formatters</span> <span class="kn">import</span> <span class="n">HtmlFormatter</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>

<span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">()</span>
<span class="n">lexer</span> <span class="o">=</span> <span class="n">PythonLexer</span><span class="p">()</span>

<span class="c1"># publish the CSS for pygments highlighting</span>
<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;style type=&#39;text/css&#39;&gt;</span>
<span class="si">%s</span><span class="s2"></span>
<span class="s2">&lt;/style&gt;</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="n">formatter</span><span class="o">.</span><span class="n">get_style_defs</span><span class="p">()</span>
<span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">

<style type="text/css">
.hll { background-color: #ffffcc }
.c { color: #408080; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cp { color: #BC7A00 } /* Comment.Preproc */
.cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #408080; font-style: italic } /* Comment.Single */
.cs { color: #408080; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #FF0000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #00A000 } /* Generic.Inserted */
.go { color: #888888 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #7D9029 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #999999; font-weight: bold } /* Name.Entity */
.ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #A0A000 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #BB6688 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */
</style>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">show_notebook</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;display a short summary of the cells of a notebook&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">io</span>
    <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">nbformat</span> <span class="kn">import</span> <span class="n">read</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">:</span>
        <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;h4&gt;</span><span class="si">%s</span><span class="s2"> cell&lt;/h4&gt;&quot;</span> <span class="o">%</span> <span class="n">cell</span><span class="o">.</span><span class="n">cell_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cell</span><span class="o">.</span><span class="n">cell_type</span> <span class="o">==</span> <span class="s1">&#39;code&#39;</span><span class="p">:</span>
            <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">highlight</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">lexer</span><span class="p">,</span> <span class="n">formatter</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;pre&gt;</span><span class="si">%s</span><span class="s2">&lt;/pre&gt;&quot;</span> <span class="o">%</span> <span class="n">cell</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">html</span><span class="p">)))</span>

<span class="n">show_notebook</span><span class="p">(</span><span class="s1">&#39;Importing Notebooks.ipynb&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<h4>markdown cell</h4>
<pre># Importing Jupyter Notebooks as Modules</pre>
<h4>markdown cell</h4>
<pre>It is a common problem that people want to import code from Jupyter Notebooks.
This is made difficult by the fact that Notebooks are not plain Python files,
and thus cannot be imported by the regular Python machinery.

Fortunately, Python provides some fairly sophisticated [hooks](https://www.python.org/dev/peps/pep-0302/) into the import machinery,
so we can actually make Jupyter notebooks importable without much difficulty,
and only using public APIs.</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">io</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">types</span>
</pre></div>

<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">get_ipython</span>
<span class="kn">from</span> <span class="nn">nbformat</span> <span class="kn">import</span> <span class="n">read</span>
<span class="kn">from</span> <span class="nn">IPython.core.interactiveshell</span> <span class="kn">import</span> <span class="n">InteractiveShell</span>
</pre></div>

<h4>markdown cell</h4>
<pre>Import hooks typically take the form of two objects:

1. a Module **Loader**, which takes a module name (e.g. `'IPython.display'`), and returns a Module
2. a Module **Finder**, which figures out whether a module might exist, and tells Python what **Loader** to use</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_notebook</span><span class="p">(</span><span class="n">fullname</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;find a notebook, given its fully qualified name and an optional path</span>
<span class="sd">    </span>
<span class="sd">    This turns &quot;foo.bar&quot; into &quot;foo/bar.ipynb&quot;</span>
<span class="sd">    and tries turning &quot;Foo_Bar&quot; into &quot;Foo Bar&quot; if Foo_Bar</span>
<span class="sd">    does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">fullname</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
        <span class="n">nb_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.ipynb&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">nb_path</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">nb_path</span>
        <span class="c1"># let import Notebook_Name find &quot;Notebook Name.ipynb&quot;</span>
        <span class="n">nb_path</span> <span class="o">=</span> <span class="n">nb_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">nb_path</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">nb_path</span>
            
</pre></div>

<h4>markdown cell</h4>
<pre>## Notebook Loader</pre>
<h4>markdown cell</h4>
<pre>Here we have our Notebook Loader.
It's actually quite simple - once we figure out the filename of the module,
all it does is:

1. load the notebook document into memory
2. create an empty Module
3. execute every cell in the Module namespace

Since IPython cells can have extended syntax,
the IPython transform is applied to turn each of these cells into their pure-Python counterparts before executing them.
If all of your notebook cells are pure-Python,
this step is unnecessary.</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NotebookLoader</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Module Loader for Jupyter Notebooks&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shell</span> <span class="o">=</span> <span class="n">InteractiveShell</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
    
    <span class="k">def</span> <span class="nf">load_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fullname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;import a notebook as a module&quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">find_notebook</span><span class="p">(</span><span class="n">fullname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        
        <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;importing Jupyter notebook from </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
                                       
        <span class="c1"># load the notebook object</span>
        <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">nb</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        
        
        <span class="c1"># create the module and add it to sys.modules</span>
        <span class="c1"># if name in sys.modules:</span>
        <span class="c1">#    return sys.modules[name]</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">(</span><span class="n">fullname</span><span class="p">)</span>
        <span class="n">mod</span><span class="o">.</span><span class="vm">__file__</span> <span class="o">=</span> <span class="n">path</span>
        <span class="n">mod</span><span class="o">.</span><span class="n">__loader__</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">mod</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;get_ipython&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_ipython</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">fullname</span><span class="p">]</span> <span class="o">=</span> <span class="n">mod</span>
        
        <span class="c1"># extra work to ensure that magics that would affect the user_ns</span>
        <span class="c1"># actually affect the notebook module&#39;s ns</span>
        <span class="n">save_user_ns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">user_ns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">user_ns</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="vm">__dict__</span>
        
        <span class="k">try</span><span class="p">:</span>
          <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cell</span><span class="o">.</span><span class="n">cell_type</span> <span class="o">==</span> <span class="s1">&#39;code&#39;</span><span class="p">:</span>
                <span class="c1"># transform the input to executable Python</span>
                <span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">input_transformer_manager</span><span class="o">.</span><span class="n">transform_cell</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
                <span class="c1"># run the code in themodule</span>
                <span class="k">exec</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">mod</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">user_ns</span> <span class="o">=</span> <span class="n">save_user_ns</span>
        <span class="k">return</span> <span class="n">mod</span>
</pre></div>

<h4>markdown cell</h4>
<pre>## The Module Finder</pre>
<h4>markdown cell</h4>
<pre>The finder is a simple object that tells you whether a name can be imported,
and returns the appropriate loader.
All this one does is check, when you do:

```python
import mynotebook
```

it checks whether `mynotebook.ipynb` exists.
If a notebook is found, then it returns a NotebookLoader.

Any extra logic is just for resolving paths within packages.</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NotebookFinder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Module finder that locates Jupyter Notebooks&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">def</span> <span class="nf">find_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fullname</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">nb_path</span> <span class="o">=</span> <span class="n">find_notebook</span><span class="p">(</span><span class="n">fullname</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nb_path</span><span class="p">:</span>
            <span class="k">return</span>
        
        <span class="n">key</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="c1"># lists aren&#39;t hashable</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">NotebookLoader</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</pre></div>

<h4>markdown cell</h4>
<pre>## Register the hook</pre>
<h4>markdown cell</h4>
<pre>Now we register the `NotebookFinder` with `sys.meta_path`</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">meta_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">NotebookFinder</span><span class="p">())</span>
</pre></div>

<h4>markdown cell</h4>
<pre>After this point, my notebooks should be importable.

Let's look at what we have in the CWD:</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="n">ls</span> <span class="n">nbpackage</span>
</pre></div>

<h4>markdown cell</h4>
<pre>So I should be able to `import nbpackage.mynotebook`.</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nbpackage.mynotebook</span>
</pre></div>

<h4>markdown cell</h4>
<pre>### Aside: displaying notebooks</pre>
<h4>markdown cell</h4>
<pre>Here is some simple code to display the contents of a notebook
with syntax highlighting, etc.</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">highlight</span>
<span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="n">PythonLexer</span>
<span class="kn">from</span> <span class="nn">pygments.formatters</span> <span class="kn">import</span> <span class="n">HtmlFormatter</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>

<span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">()</span>
<span class="n">lexer</span> <span class="o">=</span> <span class="n">PythonLexer</span><span class="p">()</span>

<span class="c1"># publish the CSS for pygments highlighting</span>
<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;style type=&#39;text/css&#39;&gt;</span>
<span class="si">%s</span><span class="s2"></span>
<span class="s2">&lt;/style&gt;</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="n">formatter</span><span class="o">.</span><span class="n">get_style_defs</span><span class="p">()</span>
<span class="p">))</span>
</pre></div>

<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">show_notebook</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;display a short summary of the cells of a notebook&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">:</span>
        <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;h4&gt;</span><span class="si">%s</span><span class="s2"> cell&lt;/h4&gt;&quot;</span> <span class="o">%</span> <span class="n">cell</span><span class="o">.</span><span class="n">cell_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cell</span><span class="o">.</span><span class="n">cell_type</span> <span class="o">==</span> <span class="s1">&#39;code&#39;</span><span class="p">:</span>
            <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">highlight</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">lexer</span><span class="p">,</span> <span class="n">formatter</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;pre&gt;</span><span class="si">%s</span><span class="s2">&lt;/pre&gt;&quot;</span> <span class="o">%</span> <span class="n">cell</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">html</span><span class="p">)))</span>

<span class="n">show_notebook</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;nbpackage&quot;</span><span class="p">,</span> <span class="s2">&quot;mynotebook.ipynb&quot;</span><span class="p">))</span>
</pre></div>

<h4>markdown cell</h4>
<pre>So my notebook has some code cells,
one of which contains some IPython syntax.

Let's see what happens when we import it</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nbpackage</span> <span class="kn">import</span> <span class="n">mynotebook</span>
</pre></div>

<h4>markdown cell</h4>
<pre>Hooray, it imported!  Does it work?</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="n">mynotebook</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
</pre></div>

<h4>markdown cell</h4>
<pre>Hooray again!

Even the function that contains IPython syntax works:</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="n">mynotebook</span><span class="o">.</span><span class="n">has_ip_syntax</span><span class="p">()</span>
</pre></div>

<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="n">mynotebook</span><span class="o">.</span><span class="n">whatsmyname</span><span class="p">()</span>
</pre></div>

<h4>markdown cell</h4>
<pre>## Notebooks in packages</pre>
<h4>markdown cell</h4>
<pre>We also have a notebook inside the `nb` package,
so let's make sure that works as well.</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="n">ls</span> <span class="n">nbpackage</span><span class="o">/</span><span class="n">nbs</span>
</pre></div>

<h4>markdown cell</h4>
<pre>Note that the `__init__.py` is necessary for `nb` to be considered a package,
just like usual.</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="n">show_notebook</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;nbpackage&quot;</span><span class="p">,</span> <span class="s2">&quot;nbs&quot;</span><span class="p">,</span> <span class="s2">&quot;other.ipynb&quot;</span><span class="p">))</span>
</pre></div>

<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nbpackage.nbs</span> <span class="kn">import</span> <span class="n">other</span>
<span class="n">other</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

<h4>markdown cell</h4>
<pre>So now we have importable notebooks, from both the local directory and inside packages.

I can even put a notebook inside IPython, to further demonstrate that this is working properly:</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">IPython.paths</span> <span class="kn">import</span> <span class="n">get_ipython_package_dir</span>

<span class="n">utils</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_ipython_package_dir</span><span class="p">(),</span> <span class="s1">&#39;utils&#39;</span><span class="p">)</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;nbpackage&quot;</span><span class="p">,</span> <span class="s2">&quot;mynotebook.ipynb&quot;</span><span class="p">),</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">utils</span><span class="p">,</span> <span class="s2">&quot;inside_ipython.ipynb&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>

<h4>markdown cell</h4>
<pre>and import the notebook from `IPython.utils`</pre>
<h4>code cell</h4>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">inside_ipython</span>
<span class="n">inside_ipython</span><span class="o">.</span><span class="n">whatsmyname</span><span class="p">()</span>
</pre></div>

<h4>markdown cell</h4>
<pre>This approach can even import functions and classes that are defined in a notebook using the `%%cython` magic.</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="A-simple-way-to-import-.ipynb-files-in-jupyter-notebook-are-as-follows:">A simple way to import .ipynb files in jupyter notebook are as follows:<a class="anchor-link" href="#A-simple-way-to-import-.ipynb-files-in-jupyter-notebook-are-as-follows:">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>1) Install <code>import-ipynb</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E pip install import-ipynb
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>2) Import <code>import_ipynb</code> in jupyter notebook. Then import .ipynb file as you import .py file.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">import_ipynb</span>
<span class="kn">from</span> <span class="nn">nbpackage</span> <span class="kn">import</span> <span class="n">mynotebook</span>

<span class="n">mynotebook</span><span class="o">.</span><span class="n">whatsmyname</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>importing Jupyter notebook from /home/jupyter-sheng_wei/hexo/source/notebooks/Try-Notebook-Import/nbpackage/mynotebook.ipynb
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;nbpackage.mynotebook&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mynotebook</span><span class="o">.</span><span class="vm">__name__</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;nbpackage.mynotebook&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mynotebook</span><span class="o">.</span><span class="vm">__file__</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;/home/jupyter-sheng_wei/hexo/source/notebooks/Try-Notebook-Import/nbpackage/mynotebook.ipynb&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">import_ipynb</span>
<span class="kn">from</span> <span class="nn">nbpackage.nbs</span> <span class="kn">import</span> <span class="n">other</span>
<span class="n">other</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>importing Jupyter notebook from /home/jupyter-sheng_wei/hexo/source/notebooks/Try-Notebook-Import/nbpackage/nbs/other.ipynb
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[&nbsp;]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;barbarbarbarbarbarbarbarbarbar&#39;</pre>
</div>

</div>

</div>
</div>

</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/06/Try-To-Import-Notebooks/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-06 </div>
			<div class="article-title"><a href="/2019/10/06/Try-Datalab/" >Try Datalab</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="try-Datalab">try Datalab<a class="anchor-link" href="#try-Datalab">&#182;</a></h1><ul>
<li><a href="https://github.com/googledatalab/datalab" target="_blank" rel="noopener">https://github.com/googledatalab/datalab</a></li>
<li><a href="https://cloud.google.com/datalab/docs/quickstart" target="_blank" rel="noopener">https://cloud.google.com/datalab/docs/quickstart</a></li>
<li><a href="https://cloud.google.com/blog/products/gcp/explore-stackdriver-monitoring-data-with-cloud-datalab" target="_blank" rel="noopener">https://cloud.google.com/blog/products/gcp/explore-stackdriver-monitoring-data-with-cloud-datalab</a></li>
<li><a href="https://medium.com/@salmaan.rashid/using-google-cloud-logging-with-datalab-jupyter-notebooks-74217a085cf" target="_blank" rel="noopener">https://medium.com/@salmaan.rashid/using-google-cloud-logging-with-datalab-jupyter-notebooks-74217a085cf</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="launching-Datalab-on-the-Google-Cloud-Platform">launching Datalab on the Google Cloud Platform<a class="anchor-link" href="#launching-Datalab-on-the-Google-Cloud-Platform">&#182;</a></h2><p><a href="https://cloud.google.com/datalab/docs/quickstart" target="_blank" rel="noopener">https://cloud.google.com/datalab/docs/quickstart</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="launching-Datalab-locally">launching Datalab locally<a class="anchor-link" href="#launching-Datalab-locally">&#182;</a></h2><p><a href="https://github.com/googledatalab/datalab/wiki/Getting-Started" target="_blank" rel="noopener">https://github.com/googledatalab/datalab/wiki/Getting-Started</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git clone https://github.com/GoogleCloudPlatform/datalab.git
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nv">PROJECT_ID</span><span class="o">=</span>sandbox-243014 datalab/containers/datalab/build.sh
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nv">PROJECT_ID</span><span class="o">=</span>sandbox-243014 datalab/containers/datalab/run.sh
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a href="https://console.cloud.google.com/gcr/images/cloud-datalab" target="_blank" rel="noopener">https://console.cloud.google.com/gcr/images/cloud-datalab</a></li>
<li><a href="https://qiita.com/yukotan/items/5d1977fcc7d461efdd43" target="_blank" rel="noopener">https://qiita.com/yukotan/items/5d1977fcc7d461efdd43</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>docker run --rm -it -p <span class="s2">&quot;8081:8080&quot;</span> -v <span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">:/content&quot;</span> -e <span class="s2">&quot;PROJECT_ID=sandbox-243014&quot;</span> gcr.io/cloud-datalab/datalab:local
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="try-pydatalab">try pydatalab<a class="anchor-link" href="#try-pydatalab">&#182;</a></h1><ul>
<li><a href="https://github.com/googledatalab/pydatalab" target="_blank" rel="noopener">https://github.com/googledatalab/pydatalab</a></li>
<li><a href="https://github.com/googledatalab/pydatalab/wiki/Jupyter-Kernel-and-Notebook-Extensions" target="_blank" rel="noopener">https://github.com/googledatalab/pydatalab/wiki/Jupyter-Kernel-and-Notebook-Extensions</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sudo -E pip install datalab
<span class="o">!</span>sudo -E jupyter nbextension install --py datalab.notebook --sys-prefix

<span class="o">!</span>sudo -E pip install google.cloud.monitoring
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>jupyter nbextension list
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> google.datalab.kernel
<span class="o">%</span><span class="k">gcs</span> read --object gs://fluentd_test/avro --variable t
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="samples-of-using-pydatalab">samples of using pydatalab<a class="anchor-link" href="#samples-of-using-pydatalab">&#182;</a></h2><p><a href="https://github.com/googledatalab/notebooks" target="_blank" rel="noopener">https://github.com/googledatalab/notebooks</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git clone https://github.com/googledatalab/notebooks.git
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>ls <span class="s1">&#39;notebooks/tutorials/BigQuery/Importing and Exporting Data.ipynb&#39;</span>
<span class="o">!</span>ls <span class="s1">&#39;notebooks/tutorials/Storage/Storage Commands.ipynb&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">?</span>set_datalab_project_id
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> google.datalab.kernel
<span class="o">%</span><span class="k">gcs</span> list --objects gs://fluentd_test
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> google.datalab.kernel
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">gcs</span> list --project sandbox-243014 --objects gs://fluentd_test
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">env</span> PROJECT_ID=sandbox-243014
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://cloud.google.com/bigquery/docs/datalab-migration" target="_blank" rel="noopener">https://cloud.google.com/bigquery/docs/datalab-migration</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="source-control">source control<a class="anchor-link" href="#source-control">&#182;</a></h1><p><a href="https://cloud.google.com/datalab/docs/how-to/working-with-notebooks" target="_blank" rel="noopener">https://cloud.google.com/datalab/docs/how-to/working-with-notebooks</a></p>

</div>
</div>
</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/06/Try-Datalab/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-06 </div>
			<div class="article-title"><a href="/2019/10/06/Solve-PyDatalab-Incompatible-with-Python-3-7/" >Solve PyDatalab Incompatible with Python 3.7</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://github.com/googledatalab/pydatalab/issues/711" target="_blank" rel="noopener">https://github.com/googledatalab/pydatalab/issues/711</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git clone https://github.com/googledatalab/pydatalab.git
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>grep -r <span class="s1">&#39;async&#39;</span> --include<span class="o">=</span><span class="s1">&#39;*.py&#39;</span> pydatalab/datalab/
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://github.com/googledatalab/pydatalab/pull/720/files" target="_blank" rel="noopener">https://github.com/googledatalab/pydatalab/pull/720/files</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install --upgrade requests grpcio
<span class="o">!</span><span class="nb">cd</span> pydatalab <span class="o">&amp;&amp;</span> pip install .
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>grep -r <span class="s1">&#39;async&#39;</span> --include<span class="o">=</span><span class="s1">&#39;*.py&#39;</span> /home/sheng_wei/anaconda3/lib/python3.7/site-packages/datalab/
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>grep -r <span class="s1">&#39;yaml&#39;</span> --include<span class="o">=</span><span class="s1">&#39;*.py&#39;</span> /home/sheng_wei/anaconda3/lib/python3.7/site-packages/google/datalab/utils/commands/_utils.py
</pre></div>

    </div>
</div>
</div>

</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/06/Solve-PyDatalab-Incompatible-with-Python-3-7/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-10-05 </div>
			<div class="article-title"><a href="/2019/10/05/Hexo-Generate-Notebook-CSS/" >Hexo Generate Notebook CSS</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Remove-Duplicated-Notebook-CSS">Remove Duplicated Notebook CSS<a class="anchor-link" href="#Remove-Duplicated-Notebook-CSS">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Add Category and Tag to Notebooks</li>
<li>Move Notebook CSS to <code>&lt;head&gt;&lt;/head&gt;</code></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Add-Category-and-Tag-to-Notebooks">Add Category and Tag to Notebooks<a class="anchor-link" href="#Add-Category-and-Tag-to-Notebooks">&#182;</a></h2><p>I find that the hexo layouts for Categories and Tags are almost the same, but it seems that the the usage of Tags is more casual.
So I decide to add Tag "Notebooks" to my Notebook posts.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Move-Notebook-CSS-to-%3Chead%3E%3C/head%3E">Move Notebook CSS to <code>&lt;head&gt;&lt;/head&gt;</code><a class="anchor-link" href="#Move-Notebook-CSS-to-%3Chead%3E%3C/head%3E">&#182;</a></h2><ul>
<li><a href="https://github.com/seii-saintway/hexo-ipynb/blob/a7cf07cfdde16cab0f1aeed8922a7e9c70b8987e/generate-css/generator.ipynb" target="_blank" rel="noopener">https://github.com/seii-saintway/hexo-ipynb/blob/a7cf07cfdde16cab0f1aeed8922a7e9c70b8987e/generate-css/generator.ipynb</a></li>
<li><a href="https://github.com/seii-saintway/hexo-ipynb/blob/a7cf07cfdde16cab0f1aeed8922a7e9c70b8987e/generate-css/hexo.tpl" target="_blank" rel="noopener">https://github.com/seii-saintway/hexo-ipynb/blob/a7cf07cfdde16cab0f1aeed8922a7e9c70b8987e/generate-css/hexo.tpl</a></li>
<li><a href="https://github.com/seii-saintway/hexo-theme-freemind/blob/2d488b1b596ab908bf35bf5091076a9138271230/source/css/notebook.css" target="_blank" rel="noopener">https://github.com/seii-saintway/hexo-theme-freemind/blob/2d488b1b596ab908bf35bf5091076a9138271230/source/css/notebook.css</a></li>
</ul>

</div>
</div>
</div>
 




	
	</div>
	
  
</div>
	<a type="button" href="/2019/10/05/Hexo-Generate-Notebook-CSS/#more" class="btn btn-default more">阅读此文</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/4/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/6/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
		
			
	<div class="widget">
		<h4 style="margin-top: 18px;">标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/Neuro/">Neuro<span>2</span></a></li>
		
			<li><a href="/tags/Notebooks/">Notebooks<span>24</span></a></li>
		
			<li><a href="/tags/Bible/">Bible<span>2</span></a></li>
		
			<li><a href="/tags/UltimateFacts/">UltimateFacts<span>2</span></a></li>
		
			<li><a href="/tags/BioBuilder/">BioBuilder<span>4</span></a></li>
		
			<li><a href="/tags/Nietzsche/">Nietzsche<span>2</span></a></li>
		
			<li><a href="/tags/Metaverse/">Metaverse<span>1</span></a></li>
		
			<li><a href="/tags/Logotherapy/">Logotherapy<span>3</span></a></li>
		
			<li><a href="/tags/自分を休ませる/">自分を休ませる<span>10</span></a></li>
		
			<li><a href="/tags/Pharisee/">Pharisee<span>2</span></a></li>
		
			<li><a href="/tags/Typography/">Typography<span>4</span></a></li>
		
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4 style="margin-top: 18px;">最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2022/09/04/Look-on-Down-From-the-Bridge/" ><i class="fa fa-file-o"></i>Look on Down From the Bridge</a>
      </li>
    
      <li>
        <a href="/2022/08/20/枯れない花/" ><i class="fa fa-file-o"></i>枯れない花</a>
      </li>
    
      <li>
        <a href="/2022/07/27/biobuilder/chapter-4/" ><i class="fa fa-file-o"></i>生物伦理学基础</a>
      </li>
    
      <li>
        <a href="/2022/07/26/biobuilder/chapter-3/" ><i class="fa fa-file-o"></i>DNA 工程基础</a>
      </li>
    
      <li>
        <a href="/2022/07/25/biobuilder/chapter-2/" ><i class="fa fa-file-o"></i>生物设计基础</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget" style="border-bottom: none;">

	<h4 style="margin-top: 18px;">链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li>
			<i class="fa fa-github"></i>
			<a href="https://github.com/seii-saintway" title="Andrew's Github repository." target="_blank">Andrew&#39;s Github</a>
		</li>
	
		<li>
			<i class="fa fa-twitter"></i>
			<a href="https://twitter.com/seii_saintway" title="Andrew's Twitter account." target="_blank">Andrew&#39;s Twitter</a>
		</li>
	
		<li>
			<i class="fa fa-book"></i>
			<a href="https://www.douban.com/people/metaphilosophy/" title="Andrew's Douban account." target="_blank">Andrew&#39;s Douban</a>
		</li>
	
	</ul>

</div>

<div class="widget" style="border-bottom: none;">

  <h5>GitHub Repos</h5>
  <ul id="gh_repos" class="list-unstyled">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <a href="https://github.com/seii-saintway" target="_blank">@seii-saintway</a> on GitHub
  <script src="/js/github.js" type="text/javascript"></script>
  <script type="text/javascript">
    github.showRepos({
        user: 'seii-saintway',
        count: 0,
        skip_forks: true,
        target: '#gh_repos',
        blacklist: ''
    });
  </script>

</div>

<div class="widget">

<h5>Twitter Tweets</h5>
<ul id="tweets" class="list-unstyled"><li class="loading">Status updating&#8230;</li></ul>
<a href="https://twitter.com/seii_saintway" target="_blank">@seii_saintway</a> on Twitter
<script src="/js/twitter.js" type="text/javascript"></script>
<script type="text/javascript">
    twitter.showTweets({
        count: 10,
        target: '#tweets',
        blacklist: ''
    });
</script>

</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2022 Andrew
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>

</html>
